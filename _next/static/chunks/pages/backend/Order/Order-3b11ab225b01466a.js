(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8849],{4184:function(e,r){var a;!function(){"use strict";var s={}.hasOwnProperty;function c(){for(var e=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var t=typeof a;if("string"===t||"number"===t)e.push(a);else if(Array.isArray(a)){if(a.length){var d=c.apply(null,a);d&&e.push(d)}}else if("object"===t){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var n in a)s.call(a,n)&&a[n]&&e.push(n)}}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):void 0!==(a=(function(){return c}).apply(r,[]))&&(e.exports=a)}()},741:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Order/Order",function(){return a(3270)}])},3270:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return b}});var s=a(5893),c=a(645),t=a.n(c),d=a(2198),n=a(1163),i=a(7294),o=a(6455),l=a.n(o);function b(){let e=(0,n.useRouter)(),[r,a]=(0,i.useState)([]),[c,o]=(0,i.useState)("");(0,i.useEffect)(()=>{fetch("https://server.jtppmotor.com/api/order").then(e=>e.json()).then(e=>{a(e.map(e=>({...e,Sales_Details:e.Sales_Details?e.Sales_Details.split(",").map(e=>{let[r,a,s,c]=e.split("|");return{Product_ID:r,Product_Name:a,Order_detail_price:s,Order_detail_amount:c}}):[],Repair_Details:e.Repair_Details?e.Repair_Details.split(",").map(e=>{let[r,a,s,c,t,d,n,i,o,l,b]=e.split("|");return{Repair_ID:r,Models_ID:a,Repair_Product_ID:s,Repair_Product_Price:c,Repair_Product_Amount:t,Motorcycle_licensePlate:d,Repair_Date:n,Repair_PickupDate:i,Repair_Note:o,Repair_Status:l,Repair_Costwork:b}}):[]})))}).catch(e=>console.error("Error fetching orders:",e))},[]);let b=r=>{e.push("/backend/Order/Detail/Order_DetailSell/".concat(r))},x=r=>{e.push("/backend/Order/Detail/Order_DetailRepair/".concat(r))},f=r.filter(e=>"กำลังดำเนินการ"===e.Order_Status&&(e.User_Name.toLowerCase().includes(c)||e.Order_ID.toString().includes(c)||e.User_Tel.toString().includes(c))).sort((e,r)=>new Date(r.create_at)-new Date(e.create_at)),g=r.filter(e=>("กำลังดำเนินการซ่อม"===e.Order_Status||"ซ่อมเสร็จแล้ว"===e.Order_Status)&&(e.User_Name.toLowerCase().includes(c)||e.Order_ID.toString().includes(c)||e.User_Tel.toString().includes(c))).sort((e,r)=>new Date(r.create_at)-new Date(e.create_at)),m=e=>{l().fire({title:"คุณแน่ใจหรือไม่?",text:"คุณต้องการลบออเดอร์นี้หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, ลบเลย!",cancelButtonText:"ยกเลิก"}).then(async s=>{if(s.isConfirmed)try{if((await fetch("https://server.jtppmotor.com/api/order/deleteOrder/".concat(e),{method:"DELETE"})).ok){l().fire("ลบสำเร็จ!","ออเดอร์ถูกลบเรียบร้อยแล้ว.","success");let s=r.filter(r=>r.Order_ID!==e);a(s)}else l().fire("เกิดข้อผิดพลาด!","ไม่สามารถลบออเดอร์ได้.","error")}catch(e){console.error("Error deleting order:",e),l().fire("เกิดข้อผิดพลาด!","ไม่สามารถลบออเดอร์ได้.","error")}})};return(0,s.jsxs)("div",{className:"jsx-ce57d7ec36106fbe d-flex",children:[(0,s.jsx)(d.default,{}),(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe flex-grow-1 order-container",children:(0,s.jsxs)("div",{className:"jsx-ce57d7ec36106fbe container py-4",children:[(0,s.jsxs)("div",{style:{backgroundColor:"#fff",borderBottom:"1px solid #dee2e6",padding:"10px 0"},className:"jsx-ce57d7ec36106fbe header d-flex justify-content-between align-items-center mb-4",children:[(0,s.jsx)("h2",{className:"jsx-ce57d7ec36106fbe page-title",children:"จัดการออเดอร์"}),(0,s.jsxs)("button",{type:"button",onClick:()=>e.back(),className:"jsx-ce57d7ec36106fbe btn btn-outline-secondary btn-back",children:[(0,s.jsx)("i",{className:"jsx-ce57d7ec36106fbe bi bi-arrow-left"})," ย้อนกลับ"]})]}),(0,s.jsxs)("div",{className:"jsx-ce57d7ec36106fbe mb-4 d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{l().fire({title:"เลือกประเภทลูกค้า",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"เป็นสมาชิก",confirmButtonColor:"#339933",denyButtonText:"ไม่ใช่สมาชิก",denyButtonColor:"#6633CC"}).then(r=>{r.isConfirmed?e.push("/backend/Order/Order_Add"):r.isDenied&&e.push("/backend/Order/New_Order")})},className:"jsx-ce57d7ec36106fbe btn btn-success",children:[(0,s.jsx)("i",{className:"jsx-ce57d7ec36106fbe bi bi-plus-circle me-2"}),"เพิ่มออเดอร์"]}),(0,s.jsx)("input",{type:"text",placeholder:"ค้นหา...",value:c,onChange:e=>{o(e.target.value.toLowerCase())},className:"jsx-ce57d7ec36106fbe form-control w-auto search-input"})]}),(0,s.jsxs)("div",{className:"jsx-ce57d7ec36106fbe card mb-4 shadow-sm",children:[(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe card-header income-gradient text-white",children:(0,s.jsx)("h5",{className:"jsx-ce57d7ec36106fbe mb-0",children:"ข้อมูลการขายสินค้า"})}),(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe card-body",children:(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe table-responsive",children:(0,s.jsxs)("table",{className:"jsx-ce57d7ec36106fbe table table-striped table-hover align-middle",children:[(0,s.jsx)("thead",{className:"jsx-ce57d7ec36106fbe table-light",children:(0,s.jsxs)("tr",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"รหัส"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"ชื่อ-นามสกุล"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"สถานะ"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"เบอร์โทรศัพท์"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"วันที่สั่งซื้อ"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"จัดการ"})]})}),(0,s.jsx)("tbody",{className:"jsx-ce57d7ec36106fbe",children:f.length>0?f.map(e=>(0,s.jsxs)("tr",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.Order_ID}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.User_Name}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:(0,s.jsx)("span",{className:"jsx-ce57d7ec36106fbe "+"badge ".concat("กำลังดำเนินการ"===e.Order_Status?"bg-warning":"bg-secondary"),children:e.Order_Status})}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.User_Tel}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:new Date(e.create_at).toLocaleString()}),(0,s.jsxs)("td",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("button",{onClick:()=>b(e.Order_ID),className:"jsx-ce57d7ec36106fbe btn btn-info btn-sm me-1",children:"รายละเอียด"}),(0,s.jsx)("button",{onClick:()=>m(e.Order_ID),className:"jsx-ce57d7ec36106fbe btn btn-danger btn-sm",children:"ลบ"})]})]},e.Order_ID)):(0,s.jsx)("tr",{className:"jsx-ce57d7ec36106fbe",children:(0,s.jsx)("td",{colSpan:"6",className:"jsx-ce57d7ec36106fbe text-center",children:"ไม่พบข้อมูล"})})})]})})})]}),(0,s.jsxs)("div",{className:"jsx-ce57d7ec36106fbe card shadow-sm",children:[(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe card-header income-gradient text-white",children:(0,s.jsx)("h5",{className:"jsx-ce57d7ec36106fbe mb-0",children:"ข้อมูลการซ่อม"})}),(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe card-body",children:(0,s.jsx)("div",{className:"jsx-ce57d7ec36106fbe table-responsive",children:(0,s.jsxs)("table",{className:"jsx-ce57d7ec36106fbe table table-striped table-hover align-middle",children:[(0,s.jsx)("thead",{className:"jsx-ce57d7ec36106fbe table-light",children:(0,s.jsxs)("tr",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"รหัส"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"ชื่อ-นามสกุล"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"สถานะ"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"เบอร์โทรศัพท์"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"วันที่ส่งซ่อม"}),(0,s.jsx)("th",{className:"jsx-ce57d7ec36106fbe",children:"จัดการ"})]})}),(0,s.jsx)("tbody",{className:"jsx-ce57d7ec36106fbe",children:g.length>0?g.map(e=>(0,s.jsxs)("tr",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.Order_ID}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.User_Name}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:(0,s.jsx)("span",{className:"jsx-ce57d7ec36106fbe "+"badge ".concat("ซ่อมเสร็จแล้ว"===e.Order_Status?"bg-success":"bg-warning"),children:e.Order_Status})}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:e.User_Tel}),(0,s.jsx)("td",{className:"jsx-ce57d7ec36106fbe",children:new Date(e.create_at).toLocaleString()}),(0,s.jsxs)("td",{className:"jsx-ce57d7ec36106fbe",children:[(0,s.jsx)("button",{onClick:()=>x(e.Order_ID),className:"jsx-ce57d7ec36106fbe btn btn-info btn-sm me-1",children:"รายละเอียด"}),(0,s.jsx)("button",{onClick:()=>m(e.Order_ID),className:"jsx-ce57d7ec36106fbe btn btn-danger btn-sm",children:"ลบ"})]})]},e.Order_ID)):(0,s.jsx)("tr",{className:"jsx-ce57d7ec36106fbe",children:(0,s.jsx)("td",{colSpan:"6",className:"jsx-ce57d7ec36106fbe text-center",children:"ไม่พบข้อมูล"})})})]})})})]})]})}),(0,s.jsx)(t(),{id:"ce57d7ec36106fbe",children:".order-container.jsx-ce57d7ec36106fbe{background-color:#f0f2f5;min-height:100vh;padding:20px}.header.jsx-ce57d7ec36106fbe .btn-back.jsx-ce57d7ec36106fbe{font-size:.9rem}.page-title.jsx-ce57d7ec36106fbe{margin:0;font-size:1.5rem;font-weight:700;background:-webkit-linear-gradient(45deg,#2c3e50,#3498db);background:-moz-linear-gradient(45deg,#2c3e50,#3498db);background:-o-linear-gradient(45deg,#2c3e50,#3498db);background:linear-gradient(45deg,#2c3e50,#3498db);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.search-input.jsx-ce57d7ec36106fbe{max-width:300px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;padding:10px 20px;border:2px solid#e0e0e0;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.search-input.jsx-ce57d7ec36106fbe:focus{border-color:#2ecc71;-webkit-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);-moz-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);box-shadow:0 0 0 .2rem rgba(46,204,113,.25)}.card.jsx-ce57d7ec36106fbe{border:none;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-transition:-webkit-transform.2s,box-shadow.2s;-moz-transition:-moz-transform.2s,box-shadow.2s;-o-transition:-o-transform.2s,box-shadow.2s;transition:-webkit-transform.2s,box-shadow.2s;transition:-moz-transform.2s,box-shadow.2s;transition:-o-transform.2s,box-shadow.2s;transition:transform.2s,box-shadow.2s;margin-bottom:25px}.card-header.jsx-ce57d7ec36106fbe{border-bottom:2px solid rgba(0,0,0,.1);padding:15px 20px}.card-header.jsx-ce57d7ec36106fbe h5.jsx-ce57d7ec36106fbe{font-weight:600;letter-spacing:.5px}.badge.jsx-ce57d7ec36106fbe{padding:8px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;font-weight:500}.btn.jsx-ce57d7ec36106fbe{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.btn.jsx-ce57d7ec36106fbe:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.btn-success.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#2ecc71,#27ae60);background:-moz-linear-gradient(45deg,#2ecc71,#27ae60);background:-o-linear-gradient(45deg,#2ecc71,#27ae60);background:linear-gradient(45deg,#2ecc71,#27ae60);border:none;padding:10px 20px}.btn-info.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#3498db,#2980b9);background:-moz-linear-gradient(45deg,#3498db,#2980b9);background:-o-linear-gradient(45deg,#3498db,#2980b9);background:linear-gradient(45deg,#3498db,#2980b9);border:none;color:white}.btn-danger.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#e74c3c,#c0392b);background:-moz-linear-gradient(45deg,#e74c3c,#c0392b);background:-o-linear-gradient(45deg,#e74c3c,#c0392b);background:linear-gradient(45deg,#e74c3c,#c0392b);border:none}.btn-back.jsx-ce57d7ec36106fbe{-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;padding:8px 16px}.table.jsx-ce57d7ec36106fbe{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden}.table.jsx-ce57d7ec36106fbe thead.jsx-ce57d7ec36106fbe th.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#34495e,#415b76);background:-moz-linear-gradient(45deg,#34495e,#415b76);background:-o-linear-gradient(45deg,#34495e,#415b76);background:linear-gradient(45deg,#34495e,#415b76);color:#fff;font-weight:500;padding:15px;font-size:.95rem;border:none;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease;text-shadow:1px 1px 2px rgba(0,0,0,.1)}.table.jsx-ce57d7ec36106fbe thead.jsx-ce57d7ec36106fbe tr.jsx-ce57d7ec36106fbe{border-bottom:2px solid rgba(255,255,255,.1)}.table-light.jsx-ce57d7ec36106fbe{--bs-table-bg:transparent}.table-striped.jsx-ce57d7ec36106fbe>tbody.jsx-ce57d7ec36106fbe>tr.jsx-ce57d7ec36106fbe:nth-of-type(odd){background-color:rgba(0,0,0,.02)}.table-responsive.jsx-ce57d7ec36106fbe{padding:10px}.income-gradient.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-moz-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-o-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:linear-gradient(135deg,#1a5f7a 0%,#2c3e50 100%)}.table.jsx-ce57d7ec36106fbe tbody.jsx-ce57d7ec36106fbe tr.jsx-ce57d7ec36106fbe{-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.table.jsx-ce57d7ec36106fbe tbody.jsx-ce57d7ec36106fbe tr.jsx-ce57d7ec36106fbe:hover{background-color:rgba(52,152,219,.05);-webkit-transform:scale(1.005);-moz-transform:scale(1.005);-ms-transform:scale(1.005);-o-transform:scale(1.005);transform:scale(1.005)}.table.jsx-ce57d7ec36106fbe td.jsx-ce57d7ec36106fbe{padding:15px;vertical-align:middle;color:#2c3e50;font-size:.95rem}.badge.bg-warning.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#f1c40f,#f39c12)!important;background:-moz-linear-gradient(45deg,#f1c40f,#f39c12)!important;background:-o-linear-gradient(45deg,#f1c40f,#f39c12)!important;background:linear-gradient(45deg,#f1c40f,#f39c12)!important;color:#fff}.badge.bg-success.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#27ae60,#2ecc71)!important;background:-moz-linear-gradient(45deg,#27ae60,#2ecc71)!important;background:-o-linear-gradient(45deg,#27ae60,#2ecc71)!important;background:linear-gradient(45deg,#27ae60,#2ecc71)!important}.badge.bg-secondary.jsx-ce57d7ec36106fbe{background:-webkit-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:-moz-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:-o-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:linear-gradient(45deg,#95a5a6,#7f8c8d)!important}"})]})}}},function(e){e.O(0,[645,2198,2888,9774,179],function(){return e(e.s=741)}),_N_E=e.O()}]);