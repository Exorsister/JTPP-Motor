(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4585],{4184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var i=s.apply(null,r);i&&e.push(i)}}else if("object"===a){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0!==(r=(function(){return s}).apply(t,[]))&&(e.exports=r)}()},7026:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Product/Product_Brand_And_Model",function(){return r(5562)}])},5562:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(5893),s=r(2198),a=r(1163),i=r(7294),o=r(6455),c=r.n(o),l=r(7630);let d=r.n(l)()(c());function u(){let e=(0,a.useRouter)(),[t,r]=(0,i.useState)([]),[o,c]=(0,i.useState)(""),[l,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{u(!0);try{let e=await fetch("https://server.jtppmotor.com/api/product/get_product_brands"),t=await e.json();r(t.data)}catch(e){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลทั้งหมด:",e),d.fire("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลแบรนด์ได้","error")}finally{u(!1)}},p=async e=>{try{let t=await fetch("https://server.jtppmotor.com/api/product/add_product_brand",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_brands_Name:e.Product_brandName})});if(t.ok)d.fire("สำเร็จ","เพิ่มข้อมูลสำเร็จแล้ว","success"),m();else{let e=await t.json();d.fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง: "+e.message,"error")}}catch(e){d.fire("ผิดพลาด","การเพิ่มข้อมูลล้มเหลว","error")}},h=async(e,t)=>{try{let r=await fetch("https://server.jtppmotor.com/api/product/update_product_brand/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_brands_Name:e.Product_brandName})});if(r.ok)d.fire("สำเร็จ","แก้ไขข้อมูลสำเร็จแล้ว","success"),m();else{let e=await r.json();d.fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง: "+e.error,"error")}}catch(e){d.fire("ผิดพลาด","การแก้ไขข้อมูลล้มเหลว","error")}},f=async e=>{try{let t=await fetch("https://server.jtppmotor.com/api/product/delete_product_brand/".concat(e),{method:"DELETE"});if(t.ok)d.fire("สำเร็จ","ลบข้อมูลสำเร็จแล้ว","success"),m();else{let e=await t.json();d.fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง: "+e.error,"error")}}catch(e){d.fire("ผิดพลาด","การลบข้อมูลล้มเหลว","error")}},x=e=>{d.fire({title:"ยืนยันการลบ",text:"คุณแน่ใจหรือว่าต้องการลบข้อมูลยี่ห้อสินค้านี้?",icon:"warning",showCancelButton:!0,confirmButtonText:"ใช่, ลบเลย!",cancelButtonText:"ยกเลิก"}).then(t=>{t.isConfirmed&&f(e)})},b=e=>{d.fire({title:"แก้ไขยี่ห้อสินค้า",html:(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"ชื่อยี่ห้อ",id:"brandName",defaultValue:e.product_brands_Name}),showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",preConfirm:()=>{let e=d.getPopup().querySelector("#brandName").value;return e?{Product_brandName:e}:(d.showValidationMessage("กรุณากรอกชื่อยี่ห้อ"),!1)}}).then(t=>{t.isConfirmed&&h(t.value,e.product_brands_ID)})},j=t=>{e.push("/backend/Product/Product_Model/".concat(t))},y=t&&Array.isArray(t)?t.filter(e=>e.product_brands_Name.toLowerCase().includes(o.toLowerCase())):[];return(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(s.default,{}),(0,n.jsx)("div",{className:"flex-grow-1",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",style:{width:"100%",height:"50px"},children:(0,n.jsx)("div",{className:"d-flex justify-content-end w-98",children:(0,n.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>e.back(),children:"ย้อนกลับ"})})}),(0,n.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between",children:(0,n.jsxs)("a",{className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none",children:[(0,n.jsx)("i",{className:"bi bi-bar-chart-steps me-2"}),"ยี่ห้อและรุ่นสินค้า"]})}),(0,n.jsx)("div",{className:"my-4"}),(0,n.jsx)("div",{className:"card mb-4",children:(0,n.jsx)("div",{className:"card-body",children:(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,n.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>{d.fire({title:"เพิ่มยี่ห้อสินค้า",html:(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"ชื่อยี่ห้อ"}),showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก",preConfirm:()=>{let e=d.getPopup().querySelector("input").value;return e?{Product_brandName:e}:(d.showValidationMessage("กรุณากรอกชื่อยี่ห้อ"),!1)}}).then(e=>{e.isConfirmed&&p(e.value)})},children:[(0,n.jsx)("i",{className:"bi bi-plus-circle me-2"}),"เพิ่มยี่ห้อสินค้าใหม่"]}),(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"ค้นหา...",value:o,onChange:e=>{c(e.target.value)}})})]})})}),l?(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,n.jsx)("span",{className:"visually-hidden",children:"กำลังโหลด..."})})}):(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card-header bg-primary text-white",children:(0,n.jsx)("h5",{className:"mb-0",children:"รายการยี่ห้อสินค้า"})}),(0,n.jsx)("div",{className:"card-body",children:(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-hover",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",children:"ลำดับ"}),(0,n.jsx)("th",{scope:"col",children:"ยี่ห้อ"}),(0,n.jsx)("th",{scope:"col",children:"จัดการ"})]})}),(0,n.jsx)("tbody",{children:y.length>0?y.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t+1}),(0,n.jsx)("td",{children:e.product_brands_Name}),(0,n.jsxs)("td",{children:[(0,n.jsxs)("button",{className:"btn btn-warning me-2",onClick:()=>j(e.product_brands_ID),children:[(0,n.jsx)("i",{className:"bi bi-eye me-1"}),"ตรวจสอบรุ่นสินค้า"]}),(0,n.jsxs)("button",{className:"btn btn-info me-2",onClick:()=>b(e),children:[(0,n.jsx)("i",{className:"bi bi-pencil me-1"}),"แก้ไข"]}),(0,n.jsxs)("button",{className:"btn btn-danger",onClick:()=>x(e.product_brands_ID),children:[(0,n.jsx)("i",{className:"bi bi-trash me-1"}),"ลบ"]})]})]},t)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"3",className:"text-center",children:"ไม่พบข้อมูล"})})})]})})})]})]})})]})}},7630:function(e,t,r){var n;n=function(e,t){"use strict";let r=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],n=()=>{};return function(s){function a(t){let n={},s={},a=r.map(e=>e.key);return Object.entries(t).forEach(t=>{let[r,i]=t;a.includes(r)&&e.isValidElement(i)?(n[r]=i,s[r]=" "):s[r]=i}),[n,s]}function i(e,n){Object.entries(n).forEach(n=>{let[a,i]=n,o=r.find(e=>e.key===a).getter(s),c=t.createRoot(o);c.render(i),e.__roots.push(c)})}function o(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends s{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return s.argsToParams(t);{let e={};return["title","html","icon"].forEach((r,n)=>{void 0!==t[n]&&(e[r]=t[n])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[r,s]=a(this.__params),c=s.willOpen||n,l=s.didOpen||n,d=s.didDestroy||n;return super._main(Object.assign({},s,{willOpen:e=>{i(this,r),c(e)},didOpen:e=>{setTimeout(()=>{l(e)})},didDestroy:e=>{d(e),o(this)}}))}update(e){Object.assign(this.__params,e),o(this);let[t,r]=a(this.__params);super.update(r),i(this,t)}}}},e.exports=n(r(7294),r(745))}},function(e){e.O(0,[2198,2888,9774,179],function(){return e(e.s=7026)}),_N_E=e.O()}]);