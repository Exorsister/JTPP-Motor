(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1496],{4184:function(e,t){var c;!function(){"use strict";var s={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var c=arguments[t];if(c){var r=typeof c;if("string"===r||"number"===r)e.push(c);else if(Array.isArray(c)){if(c.length){var o=n.apply(null,c);o&&e.push(o)}}else if("object"===r){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){e.push(c.toString());continue}for(var i in c)s.call(c,i)&&c[i]&&e.push(i)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0!==(c=(function(){return n}).apply(t,[]))&&(e.exports=c)}()},8186:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Product/Product_Detail/[productId]",function(){return c(6135)}])},6135:function(e,t,c){"use strict";c.r(t),c.d(t,{default:function(){return l}});var s=c(5893),n=c(7294),r=c(2198),o=c(1163),i=c(6455),a=c.n(i);function l(){let[e,t]=(0,n.useState)(null),c=(0,o.useRouter)(),{productId:i}=c.query;(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://server.jtppmotor.com/api/product_detail/".concat(i));if(e.ok){let c=await e.json();t(c)}else console.error("มีข้อผิดพลาดในการดึงข้อมูลสินค้า: ",e.statusText)}catch(e){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลสินค้า: ",e)}};i&&e()},[i]);let l=async e=>{try{if((await a().fire({title:"คุณแน่ใจหรือไม่?",text:"คุณจะไม่สามารถกู้คืนข้อมูลนี้ได้!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ใช่, ลบ",cancelButtonText:"ยกเลิก"})).isConfirmed){let t=await fetch("https://server.jtppmotor.com/api/products/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}),s=await t.json();t.ok?(a().fire("ลบสำเร็จ!","ข้อมูลของคุณได้ถูกลบแล้ว.","success"),c.push("/backend/Product/Product_list")):a().fire("เกิดข้อผิดพลาด!",s.error||"มีข้อผิดพลาดในการลบข้อมูล","error")}}catch(e){console.error("มีข้อผิดพลาดในการส่งคำขอลบข้อมูล: ",e)}},d=e=>{c.push("/backend/Product/".concat(e))},h=e=>{c.push("/backend/Product/Product_Detail/Product_EditStock/".concat(e))},u=e=>{a().fire({title:"บาร์โค้ดสินค้า",imageUrl:e,imageAlt:"Barcode Image",confirmButtonText:"ปิด"})},m=(e,t,s)=>{a().fire({title:"เปลี่ยนรูปสินค้า",html:'\n                <img src="https://server.jtppmotor.com/uploads/'.concat(e,'" alt="').concat(t,'" width="200" style="margin-bottom: 15px;"/>\n                <input type="file" id="newImage" class="swal2-input" accept="image/*">\n            '),showCancelButton:!0,confirmButtonText:"อัปโหลด",cancelButtonText:"ยกเลิก",preConfirm:()=>{let e=document.getElementById("newImage");return e.files&&0!==e.files.length||a().showValidationMessage("กรุณาเลือกไฟล์รูปภาพ"),e.files[0]}}).then(e=>{if(e.isConfirmed){let t=e.value,n=new FormData;n.append("Product_pic",t),fetch("https://server.jtppmotor.com/api/update_product_image/".concat(s),{method:"PUT",body:n}).then(e=>e.json()).then(e=>{e.message?a().fire("สำเร็จ!",e.message,"success").then(()=>{c.reload()}):a().fire("เกิดข้อผิดพลาด!",e.error||"ไม่สามารถอัปเดตรูปภาพได้","error")}).catch(e=>{console.error("Error updating image:",e),a().fire("เกิดข้อผิดพลาด!","ไม่สามารถอัปเดตรูปภาพได้","error")})}})};return(0,s.jsxs)("div",{className:"d-flex",children:[(0,s.jsx)(r.default,{}),(0,s.jsx)("div",{className:"flex-grow-1",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",style:{width:"100%",height:"50px"},children:(0,s.jsx)("div",{className:"d-flex justify-content-end w-98",children:(0,s.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>c.back(),children:"ย้อนกลับ"})})}),(0,s.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between",children:(0,s.jsxs)("a",{className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none",children:[(0,s.jsx)("i",{className:"bi bi-cart me-2"}),"รายละเอียดสินค้า"]})}),(0,s.jsx)("div",{className:"my-3"}),(0,s.jsx)("div",{className:"card mb-4",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>h(e[0].Stock_ID),children:[(0,s.jsx)("i",{className:"bi bi-plus-circle me-2"}),"เพิ่มสินค้าสต็อกใหม่"]})})}),e?(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h5",{className:"mb-0",children:"รายการสินค้า"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{className:"table-light",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"รหัสสต็อกสินค้า"}),(0,s.jsx)("th",{scope:"col",children:"บาร์โค้ด"}),(0,s.jsx)("th",{scope:"col",children:"รูป"}),(0,s.jsx)("th",{scope:"col",children:"หมวดหมู่"}),(0,s.jsx)("th",{scope:"col",children:"ยี่ห้อ"}),(0,s.jsx)("th",{scope:"col",children:"รุ่น"}),(0,s.jsx)("th",{scope:"col",children:"ชื่อ"}),(0,s.jsx)("th",{scope:"col",children:"ราคา"}),(0,s.jsx)("th",{scope:"col",children:"จำนวน(คงเหลือ)"}),(0,s.jsx)("th",{scope:"col",children:"สถานะ"}),(0,s.jsx)("th",{scope:"col",children:"จัดการ"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.Stock_ID}),(0,s.jsx)("td",{children:e.Barcode&&(0,s.jsxs)("button",{className:"btn btn-info btn-sm",onClick:()=>u("https://server.jtppmotor.com/uploads/".concat(e.Barcode)),children:[(0,s.jsx)("i",{className:"bi bi-eye-fill"})," ดูบาร์โค้ด"]})}),(0,s.jsx)("td",{children:(0,s.jsx)("img",{src:"https://server.jtppmotor.com/uploads/".concat(e.Product_pic),alt:e.Product_Name,width:"50",height:"50",style:{cursor:"pointer"},onClick:()=>m(e.Product_pic,e.Product_Name,e.Stock_ID)})}),(0,s.jsx)("td",{children:e.Product_type_name}),(0,s.jsx)("td",{children:e.Product_Brand}),(0,s.jsx)("td",{children:e.Product_Model}),(0,s.jsx)("td",{children:e.Product_Name}),(0,s.jsx)("td",{children:e.Price_product}),(0,s.jsx)("td",{children:e.Stock_Quantity}),(0,s.jsx)("td",{children:e.Stock_Status}),(0,s.jsxs)("td",{children:[(0,s.jsxs)("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>d(e.Stock_ID),children:[(0,s.jsx)("i",{className:"bi bi-pencil me-1"}),"แก้ไข"]}),(0,s.jsxs)("button",{className:"btn btn-danger btn-sm",onClick:()=>l(e.Stock_ID),children:[(0,s.jsx)("i",{className:"bi bi-trash me-1"}),"ลบข้อมูล"]})]})]},e.Stock_ID))})]})})})]}):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"กำลังโหลด..."})})})]})})]})}}},function(e){e.O(0,[2198,2888,9774,179],function(){return e(e.s=8186)}),_N_E=e.O()}]);