(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9307],{4184:function(e,t){var a;!function(){"use strict";var s={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var l=typeof a;if("string"===l||"number"===l)e.push(a);else if(Array.isArray(a)){if(a.length){var o=r.apply(null,a);o&&e.push(o)}}else if("object"===l){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var c in a)s.call(a,c)&&a[c]&&e.push(c)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0!==(a=(function(){return r}).apply(t,[]))&&(e.exports=a)}()},761:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Product/[stockId]",function(){return a(9228)}])},9228:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(5893),r=a(7294),l=a(2198),o=a(1163);function c(){let e=(0,o.useRouter)(),{stockId:t}=e.query,[a,c]=(0,r.useState)({Product_Name:"",Product_Brand:"",Product_Model:"",Product_Detail:"",Price_product:"",Stock_Status:"",Product_pic:"",Unit_Cost:"",Stock_Quantity:"",Product_type_name:""}),[n,i]=(0,r.useState)([]),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://server.jtppmotor.com/api/get_products/".concat(t));if(e.ok){let t=await e.json();i([{value:t.Product_type_name,label:t.Product_type_name}]),c(t)}else u("มีข้อผิดพลาดในการดึงข้อมูลสินค้า"),console.error("มีข้อผิดพลาดในการดึงข้อมูลสินค้า: ",e.statusText)}catch(e){u("เกิดข้อผิดพลาดในการดึงข้อมูลสินค้า"),console.error("เกิดข้อผิดพลาดในการดึงข้อมูลสินค้า: ",e)}};t&&e()},[t]);let x=async s=>{s.preventDefault(),u(""),h(""),_(!0);try{let s=await fetch("https://server.jtppmotor.com/api/edit_product/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await s.json();s.ok?(h(r.message),setTimeout(()=>{e.push("/backend/Product/Product_list")},1500)):(u(r.error||"Error updating product data"),console.error(r.error||"Error updating product data"))}catch(e){u("Error submitting product update"),console.error("Error submitting product update:",e)}finally{_(!1)}},f=e=>{c({...a,[e.target.name]:e.target.value})};return(0,s.jsxs)("div",{className:"d-flex",children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("div",{className:"flex-grow-1",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",style:{width:"100%",height:"50px"},children:(0,s.jsx)("div",{className:"d-flex justify-content-end w-98",children:(0,s.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>e.back(),children:"ย้อนกลับ"})})}),(0,s.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between",children:(0,s.jsxs)("a",{className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none",children:[(0,s.jsx)("i",{className:"bi bi-cart me-2"}),"แก้ไขสินค้า"]})}),(0,s.jsx)("div",{className:"my-4"}),d&&(0,s.jsx)("div",{className:"alert alert-danger",children:d}),m&&(0,s.jsx)("div",{className:"alert alert-success",children:m}),(0,s.jsx)("div",{className:"card shadow-sm",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)("div",{className:"row g-3",children:[(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Product_Brand",className:"form-label",children:"ยี่ห้อสินค้า"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"Product_Brand",name:"Product_Brand",value:a.Product_Brand,onChange:f})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Product_Model",className:"form-label",children:"รุ่นสินค้า"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"Product_Model",name:"Product_Model",value:a.Product_Model,onChange:f})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Product_Name",className:"form-label",children:"ชื่อสินค้า"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"Product_Name",name:"Product_Name",value:a.Product_Name,onChange:f})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Stock_Quantity",className:"form-label",children:"จำนวนสินค้าคงเหลือ"}),(0,s.jsx)("input",{type:"number",className:"form-control",id:"Stock_Quantity",name:"Stock_Quantity",value:a.Stock_Quantity,onChange:f})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Price_product",className:"form-label",children:"ราคาสินค้า (ต่อชิ้น)"}),(0,s.jsx)("input",{type:"number",className:"form-control",id:"Price_product",name:"Price_product",value:a.Price_product,onChange:f,readOnly:!0,disabled:!0})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Unit_Cost",className:"form-label",children:"ราคาต้นทุน (ต่อชิ้น)"}),(0,s.jsx)("input",{type:"number",className:"form-control",id:"Unit_Cost",name:"Unit_Cost",value:a.Unit_Cost,onChange:f,readOnly:!0,disabled:!0})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Product_type_name",className:"form-label",children:"หมวดหมู่สินค้า"}),(0,s.jsx)("input",{className:"form-control",id:"Product_type_name",name:"Product_type_name",value:a.Product_type_name,readOnly:!0,disabled:!0})]}),(0,s.jsxs)("div",{className:"col-md-4",children:[(0,s.jsx)("label",{htmlFor:"Stock_Status",className:"form-label",children:"สถานะสินค้า"}),(0,s.jsxs)("select",{className:"form-select",id:"Stock_Status",name:"Stock_Status",value:a.Stock_Status,onChange:f,children:[(0,s.jsx)("option",{value:"มีสินค้า",children:"มีสินค้า"}),(0,s.jsx)("option",{value:"สินค้าหมด",children:"สินค้าหมด"})]})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"Product_Detail",className:"form-label",children:"รายละเอียดสินค้า"}),(0,s.jsx)("textarea",{className:"form-control",id:"Product_Detail",name:"Product_Detail",rows:"3",value:a.Product_Detail,onChange:f})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"กำลังบันทึก...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"bi bi-save me-2"}),"บันทึกการแก้ไข"]})})})]})})})]})})]})}}},function(e){e.O(0,[2198,2888,9774,179],function(){return e(e.s=761)}),_N_E=e.O()}]);