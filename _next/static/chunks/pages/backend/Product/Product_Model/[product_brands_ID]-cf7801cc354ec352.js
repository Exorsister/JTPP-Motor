(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1690],{4184:function(e,t){var r;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var a=s.apply(null,r);a&&e.push(a)}}else if("object"===n){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0!==(r=(function(){return s}).apply(t,[]))&&(e.exports=r)}()},710:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Product/Product_Model/[product_brands_ID]",function(){return r(7140)}])},7140:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var o=r(5893),s=r(1163),n=r(7294),a=r(2198),i=r(6455),c=r.n(i),l=r(7630),d=r.n(l),u=r(343);let m=d()(c());function p(){let e=(0,s.useRouter)(),{product_brands_ID:t}=e.query,[r,i]=(0,n.useState)(""),[l,d]=(0,n.useState)([]);(0,u.ZP)();let p=async()=>{if(t)try{let e=await fetch("https://server.jtppmotor.com/api/product/get_product_model/".concat(t));if(!e.ok)throw Error("Failed to fetch data");let r=await e.json();d(r)}catch(e){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลรุ่น:",e),c().fire("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลรุ่นได้","error")}};(0,n.useEffect)(()=>{p()},[t]);let h=async e=>{if(!t){c().fire("ผิดพลาด","ไม่พบข้อมูลแบรนด์","error");return}try{let r=await fetch("https://server.jtppmotor.com/api/product/add_product_model",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_brands_ID:t,product_models_Name:e})}),o=await r.json();"เพิ่มรุ่นสินค้าสำเร็จ"===o.message?(await p(),c().fire("สำเร็จ","เพิ่มรุ่นสำเร็จแล้ว","success")):(console.error("Error Response:",o),c().fire("ผิดพลาด",o.error||"เกิดข้อผิดพลาดในการเพิ่มรุ่น","error"))}catch(e){console.error("Error:",e),c().fire("ผิดพลาด","การเพิ่มรุ่นล้มเหลว","error")}},f=async(e,t)=>{try{let r=await fetch("https://server.jtppmotor.com/api/product/update_product_model/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_models_Name:t})});if(r.ok)await p(),c().fire("สำเร็จ","อัปเดตรุ่นสำเร็จแล้ว","success");else{let e=await r.json();c().fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง: "+(e.error||"ไม่มีรายละเอียด"),"error")}}catch(e){console.error("Caught Error:",e),c().fire("ผิดพลาด","การอัปเดตรุ่นล้มเหลว","error")}},x=async e=>{try{let t=await fetch("https://server.jtppmotor.com/api/product/delete_product_model/".concat(e),{method:"DELETE"});if(t.ok)await p(),c().fire("สำเร็จ","ลบรุ่นสำเร็จแล้ว","success");else{let e=await t.json();c().fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง: "+(e.error||"ไม่มีรายละเอียด"),"error")}}catch(e){console.error("Caught Error:",e),c().fire("ผิดพลาด","การลบรุ่นล้มเหลว","error")}},j=e=>{m.fire({title:"แก้ไขรุ่นสินค้า",html:(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"ชื่อรุ่น",id:"modelName",defaultValue:e.product_models_Name}),showCancelButton:!0,confirmButtonText:"อัปเดตรุ่น",cancelButtonText:"ยกเลิก",preConfirm:()=>{let t=m.getPopup().querySelector("#modelName").value;return t?{product_models_ID:e.product_models_ID,modelName:t}:(m.showValidationMessage("กรุณากรอกชื่อรุ่น"),!1)}}).then(e=>{e.isConfirmed&&f(e.value.product_models_ID,e.value.modelName)})},_=e=>{m.fire({title:"ยืนยันการลบ",text:"คุณแน่ใจว่าต้องการลบรุ่น ".concat(e.product_models_Name,"?"),icon:"warning",showCancelButton:!0,confirmButtonText:"ลบ",cancelButtonText:"ยกเลิก"}).then(t=>{t.isConfirmed&&x(e.product_models_ID)})},b=l.filter(e=>e.product_models_Name&&e.product_models_Name.toLowerCase().includes(r.toLowerCase()));return(0,o.jsxs)("div",{className:"d-flex",children:[(0,o.jsx)(a.default,{}),(0,o.jsx)("div",{className:"flex-grow-1",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",style:{width:"100%",height:"50px"},children:(0,o.jsx)("div",{className:"d-flex justify-content-end w-98",children:(0,o.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>e.back(),children:"ย้อนกลับ"})})}),(0,o.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between",children:(0,o.jsxs)("a",{className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none",children:[(0,o.jsx)("i",{className:"bi bi-box me-2"}),"ข้อมูลรุ่นสินค้า"]})}),(0,o.jsx)("div",{className:"my-4"}),(0,o.jsx)("div",{className:"card mb-4",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,o.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>{m.fire({title:"เพิ่มรุ่นสินค้า",html:(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"ชื่อรุ่น",id:"modelName"}),showCancelButton:!0,confirmButtonText:"เพิ่มรุ่น",cancelButtonText:"ยกเลิก",preConfirm:()=>{let e=m.getPopup().querySelector("#modelName").value;return e?{modelName:e}:(m.showValidationMessage("กรุณากรอกชื่อรุ่น"),!1)}}).then(e=>{e.isConfirmed&&h(e.value.modelName)})},children:[(0,o.jsx)("i",{className:"bi bi-plus-circle me-2"}),"เพิ่มรุ่นสินค้า"]}),(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsx)("input",{type:"text",className:"form-control me-2",placeholder:"ค้นหา...",value:r,onChange:e=>{i(e.target.value)}})})]})})}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card-header bg-primary text-white",children:(0,o.jsx)("h5",{className:"mb-0",children:"รายการรุ่นสินค้า"})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("div",{className:"table-responsive",children:(0,o.jsxs)("table",{className:"table table-hover",children:[(0,o.jsx)("thead",{className:"table-light",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",children:"ลำดับ"}),(0,o.jsx)("th",{scope:"col",children:"ชื่อรุ่น"}),(0,o.jsx)("th",{scope:"col",children:"จัดการ"})]})}),(0,o.jsx)("tbody",{children:b.length>0?b.map((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t+1}),(0,o.jsx)("td",{children:e.product_models_Name}),(0,o.jsxs)("td",{children:[(0,o.jsxs)("button",{className:"btn btn-warning me-2",onClick:()=>j(e),children:[(0,o.jsx)("i",{className:"bi bi-pencil me-1"}),"แก้ไขชื่อ"]}),(0,o.jsxs)("button",{className:"btn btn-danger",onClick:()=>_(e),children:[(0,o.jsx)("i",{className:"bi bi-trash me-1"}),"ลบ"]})]})]},e.product_models_ID)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"3",className:"text-center",children:"ไม่พบข้อมูลรุ่น"})})})]})})})]})]})})]})}},7630:function(e,t,r){var o;o=function(e,t){"use strict";let r=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],o=()=>{};return function(s){function n(t){let o={},s={},n=r.map(e=>e.key);return Object.entries(t).forEach(t=>{let[r,a]=t;n.includes(r)&&e.isValidElement(a)?(o[r]=a,s[r]=" "):s[r]=a}),[o,s]}function a(e,o){Object.entries(o).forEach(o=>{let[n,a]=o,i=r.find(e=>e.key===n).getter(s),c=t.createRoot(i);c.render(a),e.__roots.push(c)})}function i(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends s{static argsToParams(t){if(!(e.isValidElement(t[0])||e.isValidElement(t[1])))return s.argsToParams(t);{let e={};return["title","html","icon"].forEach((r,o)=>{void 0!==t[o]&&(e[r]=t[o])}),e}}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);let[r,s]=n(this.__params),c=s.willOpen||o,l=s.didOpen||o,d=s.didDestroy||o;return super._main(Object.assign({},s,{willOpen:e=>{a(this,r),c(e)},didOpen:e=>{setTimeout(()=>{l(e)})},didDestroy:e=>{d(e),i(this)}}))}update(e){Object.assign(this.__params,e),i(this);let[t,r]=n(this.__params);super.update(r),a(this,t)}}}},e.exports=o(r(7294),r(745))}},function(e){e.O(0,[676,343,2198,2888,9774,179],function(){return e(e.s=710)}),_N_E=e.O()}]);