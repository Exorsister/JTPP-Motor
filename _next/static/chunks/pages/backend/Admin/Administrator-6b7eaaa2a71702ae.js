(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2006],{4184:function(e,a){var s;!function(){"use strict";var r={}.hasOwnProperty;function t(){for(var e=[],a=0;a<arguments.length;a++){var s=arguments[a];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)){if(s.length){var d=t.apply(null,s);d&&e.push(d)}}else if("object"===n){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var i in s)r.call(s,i)&&s[i]&&e.push(i)}}}return e.join(" ")}e.exports?(t.default=t,e.exports=t):void 0!==(s=(function(){return t}).apply(a,[]))&&(e.exports=s)}()},5227:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Admin/Administrator",function(){return s(2778)}])},2778:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return l}});var r=s(5893),t=s(645),n=s.n(t),d=s(1163),i=s(2198),o=s(7294),c=s(6245);function l(){let[e,a]=(0,o.useState)([]),[s,t]=(0,o.useState)(""),[l,b]=(0,o.useState)(""),[x,m]=(0,o.useState)(null),g=(0,d.useRouter)();(0,o.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("token");try{let s=await fetch("https://server.jtppmotor.com/api/admins",{headers:{Authorization:"Bearer ".concat(e)}}),r=await s.json();a(r)}catch(e){console.error("เกิดข้อผิดพลาดในการดึงข้อมูลผู้ดูแลระบบ:",e)}};(()=>{let e=localStorage.getItem("token");if(e){let a=(0,c.Z)(e);b(a.role),m(a.User_ID)}else g.push("/login")})(),e()},[]);let j=async s=>{let r=localStorage.getItem("token");try{let t=await fetch("https://server.jtppmotor.com/api/delete_admins/".concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(t.ok)console.log("ลบข้อมูลสำเร็จ"),a(e.filter(e=>e.User_ID!==s));else{let e=await t.json();console.error(e.error||"มีข้อผิดพลาดในการลบข้อมูล")}}catch(e){console.error("มีข้อผิดพลาดในการส่งคำขอลบข้อมูล:",e)}},u=e=>{"SuperAdmin"===l||e===x?g.push("/backend/Admin/".concat(e)):alert("คุณไม่มีสิทธิ์แก้ไขข้อมูลนี้")},h=e.filter(e=>e.User_firstName.toLowerCase().includes(s)||e.User_lastName.toLowerCase().includes(s)||e.User_Email.toLowerCase().includes(s)||e.User_ID.toString().includes(s)||e.role.toLowerCase().includes(s));return(0,r.jsxs)("div",{className:"jsx-13ee02b3da791408 d-flex",children:[(0,r.jsx)(i.default,{}),(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 flex-grow-1 admin-container",children:(0,r.jsxs)("div",{className:"jsx-13ee02b3da791408 container py-4",children:[(0,r.jsxs)("div",{style:{backgroundColor:"#fff",borderBottom:"1px solid #dee2e6",padding:"10px 0"},className:"jsx-13ee02b3da791408 header d-flex justify-content-between align-items-center mb-4",children:[(0,r.jsx)("h2",{className:"jsx-13ee02b3da791408 page-title",children:"ผู้ดูแลระบบ"}),(0,r.jsxs)("button",{type:"button",onClick:()=>g.back(),className:"jsx-13ee02b3da791408 btn btn-outline-secondary btn-back",children:[(0,r.jsx)("i",{className:"jsx-13ee02b3da791408 bi bi-arrow-left"})," ย้อนกลับ"]})]}),(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 card mb-4 shadow-sm",children:(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 card-body",children:(0,r.jsxs)("div",{className:"jsx-13ee02b3da791408 d-flex justify-content-between align-items-center",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{"SuperAdmin"===l?g.push("/backend/Admin/Add_Admin"):alert("คุณไม่มีสิทธิ์เพิ่มผู้ดูแลระบบ")},className:"jsx-13ee02b3da791408 btn btn-success",children:[(0,r.jsx)("i",{className:"jsx-13ee02b3da791408 bi bi-person-plus me-2"}),"เพิ่มผู้ดูแลระบบ"]}),(0,r.jsx)("input",{type:"text",placeholder:"ค้นหา...",value:s,onChange:e=>{t(e.target.value.toLowerCase())},className:"jsx-13ee02b3da791408 form-control w-auto search-input"})]})})}),(0,r.jsxs)("div",{className:"jsx-13ee02b3da791408 card shadow-sm",children:[(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 card-header income-gradient text-white",children:(0,r.jsx)("h5",{className:"jsx-13ee02b3da791408 mb-0",children:"รายชื่อผู้ดูแลระบบ"})}),(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 card-body",children:(0,r.jsx)("div",{className:"jsx-13ee02b3da791408 table-responsive",children:(0,r.jsxs)("table",{className:"jsx-13ee02b3da791408 table table-striped table-hover align-middle",children:[(0,r.jsx)("thead",{className:"jsx-13ee02b3da791408 table-light",children:(0,r.jsxs)("tr",{className:"jsx-13ee02b3da791408",children:[(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"ลำดับ"}),(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"ชื่อ"}),(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"นามสกุล"}),(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"อีเมล"}),(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"สถานะ"}),(0,r.jsx)("th",{className:"jsx-13ee02b3da791408",children:"จัดการ"})]})}),(0,r.jsx)("tbody",{className:"jsx-13ee02b3da791408",children:h.length>0?h.map((e,a)=>(0,r.jsxs)("tr",{className:"jsx-13ee02b3da791408",children:[(0,r.jsx)("td",{className:"jsx-13ee02b3da791408",children:e.User_ID}),(0,r.jsx)("td",{className:"jsx-13ee02b3da791408",children:e.User_firstName}),(0,r.jsx)("td",{className:"jsx-13ee02b3da791408",children:e.User_lastName}),(0,r.jsx)("td",{className:"jsx-13ee02b3da791408",children:e.User_Email}),(0,r.jsx)("td",{className:"jsx-13ee02b3da791408",children:(0,r.jsx)("span",{className:"jsx-13ee02b3da791408 badge bg-primary",children:e.role})}),(0,r.jsxs)("td",{className:"jsx-13ee02b3da791408",children:[(0,r.jsxs)("button",{onClick:()=>u(e.User_ID),disabled:"SuperAdmin"!==l&&e.User_ID!==x,className:"jsx-13ee02b3da791408 btn btn-warning me-2",children:[(0,r.jsx)("i",{className:"jsx-13ee02b3da791408 bi bi-pencil me-1"}),"แก้ไข"]}),"SuperAdmin"!==e.role&&(0,r.jsxs)("button",{onClick:()=>j(e.User_ID),disabled:"SuperAdmin"!==l,className:"jsx-13ee02b3da791408 btn btn-danger",children:[(0,r.jsx)("i",{className:"jsx-13ee02b3da791408 bi bi-trash me-1"}),"ลบข้อมูล"]})]})]},a)):(0,r.jsx)("tr",{className:"jsx-13ee02b3da791408",children:(0,r.jsx)("td",{colSpan:"7",className:"jsx-13ee02b3da791408 text-center",children:"ไม่พบข้อมูล"})})})]})})})]})]})}),(0,r.jsx)(n(),{id:"13ee02b3da791408",children:".admin-container.jsx-13ee02b3da791408{background-color:#f0f2f5;min-height:100vh;padding:20px}.page-title.jsx-13ee02b3da791408{margin:0;font-size:1.5rem;font-weight:700;background:-webkit-linear-gradient(45deg,#2c3e50,#3498db);background:-moz-linear-gradient(45deg,#2c3e50,#3498db);background:-o-linear-gradient(45deg,#2c3e50,#3498db);background:linear-gradient(45deg,#2c3e50,#3498db);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.search-input.jsx-13ee02b3da791408{max-width:300px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;padding:10px 20px;border:2px solid#e0e0e0;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.search-input.jsx-13ee02b3da791408:focus{border-color:#2ecc71;-webkit-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);-moz-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);box-shadow:0 0 0 .2rem rgba(46,204,113,.25)}.btn.jsx-13ee02b3da791408{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.btn.jsx-13ee02b3da791408:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.btn-success.jsx-13ee02b3da791408{background:-webkit-linear-gradient(45deg,#2ecc71,#27ae60);background:-moz-linear-gradient(45deg,#2ecc71,#27ae60);background:-o-linear-gradient(45deg,#2ecc71,#27ae60);background:linear-gradient(45deg,#2ecc71,#27ae60);border:none;padding:10px 20px}.btn-warning.jsx-13ee02b3da791408{background:-webkit-linear-gradient(45deg,#f1c40f,#f39c12);background:-moz-linear-gradient(45deg,#f1c40f,#f39c12);background:-o-linear-gradient(45deg,#f1c40f,#f39c12);background:linear-gradient(45deg,#f1c40f,#f39c12);border:none;color:white}.btn-danger.jsx-13ee02b3da791408{background:-webkit-linear-gradient(45deg,#e74c3c,#c0392b);background:-moz-linear-gradient(45deg,#e74c3c,#c0392b);background:-o-linear-gradient(45deg,#e74c3c,#c0392b);background:linear-gradient(45deg,#e74c3c,#c0392b);border:none}.income-gradient.jsx-13ee02b3da791408{background:-webkit-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-moz-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-o-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:linear-gradient(135deg,#1a5f7a 0%,#2c3e50 100%)}.table.jsx-13ee02b3da791408 thead.jsx-13ee02b3da791408 th.jsx-13ee02b3da791408{background:-webkit-linear-gradient(45deg,#34495e,#415b76);background:-moz-linear-gradient(45deg,#34495e,#415b76);background:-o-linear-gradient(45deg,#34495e,#415b76);background:linear-gradient(45deg,#34495e,#415b76);color:#fff;font-weight:500;padding:15px;font-size:.95rem;border:none;text-transform:uppercase;letter-spacing:.5px}.table.jsx-13ee02b3da791408 tbody.jsx-13ee02b3da791408 tr.jsx-13ee02b3da791408{-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.table.jsx-13ee02b3da791408 tbody.jsx-13ee02b3da791408 tr.jsx-13ee02b3da791408:hover{background-color:rgba(52,152,219,.05);-webkit-transform:scale(1.005);-moz-transform:scale(1.005);-ms-transform:scale(1.005);-o-transform:scale(1.005);transform:scale(1.005)}.card.jsx-13ee02b3da791408{border:none;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-transition:-webkit-transform.2s,box-shadow.2s;-moz-transition:-moz-transform.2s,box-shadow.2s;-o-transition:-o-transform.2s,box-shadow.2s;transition:-webkit-transform.2s,box-shadow.2s;transition:-moz-transform.2s,box-shadow.2s;transition:-o-transform.2s,box-shadow.2s;transition:transform.2s,box-shadow.2s;margin-bottom:25px}.card-header.jsx-13ee02b3da791408{border-bottom:2px solid rgba(0,0,0,.1);padding:15px 20px}.badge.jsx-13ee02b3da791408{padding:8px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;font-weight:500}"})]})}}},function(e){e.O(0,[645,2198,2888,9774,179],function(){return e(e.s=5227)}),_N_E=e.O()}]);