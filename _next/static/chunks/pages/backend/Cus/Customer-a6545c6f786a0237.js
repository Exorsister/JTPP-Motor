(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{4184:function(d,e){var s;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var d=[],e=0;e<arguments.length;e++){var s=arguments[e];if(s){var n=typeof s;if("string"===n||"number"===n)d.push(s);else if(Array.isArray(s)){if(s.length){var t=r.apply(null,s);t&&d.push(t)}}else if("object"===n){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){d.push(s.toString());continue}for(var c in s)a.call(s,c)&&s[c]&&d.push(c)}}}return d.join(" ")}d.exports?(r.default=r,d.exports=r):void 0!==(s=(function(){return r}).apply(e,[]))&&(d.exports=s)}()},5624:function(d,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backend/Cus/Customer",function(){return s(8812)}])},8812:function(d,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var a=s(5893),r=s(645),n=s.n(r),t=s(2198),c=s(1163),i=s(7294),o=s(6455),l=s.n(o);function b(){let[d,e]=(0,i.useState)([]),s=(0,c.useRouter)(),[r,o]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{let d=await fetch("https://server.jtppmotor.com/api/customers"),s=await d.json();e(s)}catch(d){console.error("เกิดข้อผิดพลาดในการดึงข้อมูล: ",d)}})()},[]);let b=async d=>{try{let e=await fetch("https://server.jtppmotor.com/api/delete_customers/".concat(d),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});await e.json(),e.ok?(l().fire("สำเร็จ","ลบข้อมูลสำเร็จแล้ว","success"),s.reload):l().fire("ผิดพลาด","เกิดข้อผิดพลาดบางอย่าง","error")}catch(d){l().fire("ผิดพลาด","การลบข้อมูลล้มเหลว","error")}},x=d=>{l().fire({title:"คุณต้องการลบข้อมูลนี้หรือไม่?",icon:"warning",showCancelButton:!0,confirmButtonText:"ยืนยัน",cancelButtonText:"ยกเลิก"}).then(e=>{e.isConfirmed&&(b(d),s.reload())})},g=d=>{s.push("/backend/Cus/".concat(d))},m=d.filter(d=>"User"===d.role&&(d.User_firstName.toLowerCase().includes(r)||d.User_lastName.toLowerCase().includes(r)||d.User_Email.toLowerCase().includes(r)||d.User_ID.toString().includes(r)));return(0,a.jsxs)("div",{className:"jsx-d7cd3141d15271d8 d-flex",children:[(0,a.jsx)(t.default,{}),(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 flex-grow-1 customer-container",children:(0,a.jsxs)("div",{className:"jsx-d7cd3141d15271d8 container py-4",children:[(0,a.jsxs)("div",{style:{backgroundColor:"#fff",borderBottom:"1px solid #dee2e6",padding:"10px 0"},className:"jsx-d7cd3141d15271d8 header d-flex justify-content-between align-items-center mb-4",children:[(0,a.jsx)("h2",{className:"jsx-d7cd3141d15271d8 page-title",children:"รายชื่อลูกค้า"}),(0,a.jsxs)("button",{type:"button",onClick:()=>s.back(),className:"jsx-d7cd3141d15271d8 btn btn-outline-secondary btn-back",children:[(0,a.jsx)("i",{className:"jsx-d7cd3141d15271d8 bi bi-arrow-left"})," ย้อนกลับ"]})]}),(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 card mb-4 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 card-body",children:(0,a.jsxs)("div",{className:"jsx-d7cd3141d15271d8 d-flex justify-content-between align-items-center",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{s.push("/backend/Cus/Add_Customer")},className:"jsx-d7cd3141d15271d8 btn btn-success",children:[(0,a.jsx)("i",{className:"jsx-d7cd3141d15271d8 bi bi-person-plus-fill me-2"}),"เพิ่มข้อมูล"]}),(0,a.jsx)("input",{type:"text",placeholder:"ค้นหา...",value:r,onChange:d=>{o(d.target.value.toLowerCase())},className:"jsx-d7cd3141d15271d8 form-control w-auto search-input"})]})})}),(0,a.jsxs)("div",{className:"jsx-d7cd3141d15271d8 card shadow-sm",children:[(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 card-header income-gradient text-white",children:(0,a.jsx)("h5",{className:"jsx-d7cd3141d15271d8 mb-0",children:"รายชื่อลูกค้าทั้งหมด"})}),(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 card-body",children:(0,a.jsx)("div",{className:"jsx-d7cd3141d15271d8 table-responsive",children:(0,a.jsxs)("table",{className:"jsx-d7cd3141d15271d8 table table-striped table-hover align-middle",children:[(0,a.jsx)("thead",{className:"jsx-d7cd3141d15271d8 table-light",children:(0,a.jsxs)("tr",{className:"jsx-d7cd3141d15271d8",children:[(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"ลำดับ"}),(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"ชื่อ"}),(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"นามสกุล"}),(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"อีเมล"}),(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"สิทธิ์การเข้าถึง"}),(0,a.jsx)("th",{className:"jsx-d7cd3141d15271d8",children:"จัดการ"})]})}),(0,a.jsx)("tbody",{className:"jsx-d7cd3141d15271d8",children:m.length>0?m.map((d,e)=>(0,a.jsxs)("tr",{className:"jsx-d7cd3141d15271d8",children:[(0,a.jsx)("td",{className:"jsx-d7cd3141d15271d8",children:d.User_ID}),(0,a.jsx)("td",{className:"jsx-d7cd3141d15271d8",children:d.User_firstName}),(0,a.jsx)("td",{className:"jsx-d7cd3141d15271d8",children:d.User_lastName}),(0,a.jsx)("td",{className:"jsx-d7cd3141d15271d8",children:d.User_Email}),(0,a.jsx)("td",{className:"jsx-d7cd3141d15271d8",children:(0,a.jsx)("span",{className:"jsx-d7cd3141d15271d8 badge bg-primary",children:d.role})}),(0,a.jsxs)("td",{className:"jsx-d7cd3141d15271d8",children:[(0,a.jsxs)("button",{onClick:()=>g(d.User_ID),className:"jsx-d7cd3141d15271d8 btn btn-warning me-2",children:[(0,a.jsx)("i",{className:"jsx-d7cd3141d15271d8 bi bi-pencil me-1"}),"แก้ไข"]}),(0,a.jsxs)("button",{onClick:()=>x(d.User_ID),className:"jsx-d7cd3141d15271d8 btn btn-danger",children:[(0,a.jsx)("i",{className:"jsx-d7cd3141d15271d8 bi bi-trash me-1"}),"ลบข้อมูล"]})]})]},e)):(0,a.jsx)("tr",{className:"jsx-d7cd3141d15271d8",children:(0,a.jsx)("td",{colSpan:"6",className:"jsx-d7cd3141d15271d8 text-center",children:"ไม่พบข้อมูล"})})})]})})})]})]})}),(0,a.jsx)(n(),{id:"d7cd3141d15271d8",children:".customer-container.jsx-d7cd3141d15271d8{background-color:#f0f2f5;min-height:100vh;padding:20px}.page-title.jsx-d7cd3141d15271d8{margin:0;font-size:1.5rem;font-weight:700;background:-webkit-linear-gradient(45deg,#2c3e50,#3498db);background:-moz-linear-gradient(45deg,#2c3e50,#3498db);background:-o-linear-gradient(45deg,#2c3e50,#3498db);background:linear-gradient(45deg,#2c3e50,#3498db);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.search-input.jsx-d7cd3141d15271d8{max-width:300px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;padding:10px 20px;border:2px solid#e0e0e0;-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.search-input.jsx-d7cd3141d15271d8:focus{border-color:#2ecc71;-webkit-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);-moz-box-shadow:0 0 0 .2rem rgba(46,204,113,.25);box-shadow:0 0 0 .2rem rgba(46,204,113,.25)}.btn.jsx-d7cd3141d15271d8{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s}.btn.jsx-d7cd3141d15271d8:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.btn-success.jsx-d7cd3141d15271d8{background:-webkit-linear-gradient(45deg,#2ecc71,#27ae60);background:-moz-linear-gradient(45deg,#2ecc71,#27ae60);background:-o-linear-gradient(45deg,#2ecc71,#27ae60);background:linear-gradient(45deg,#2ecc71,#27ae60);border:none;padding:10px 20px}.btn-warning.jsx-d7cd3141d15271d8{background:-webkit-linear-gradient(45deg,#f1c40f,#f39c12);background:-moz-linear-gradient(45deg,#f1c40f,#f39c12);background:-o-linear-gradient(45deg,#f1c40f,#f39c12);background:linear-gradient(45deg,#f1c40f,#f39c12);border:none;color:white}.btn-danger.jsx-d7cd3141d15271d8{background:-webkit-linear-gradient(45deg,#e74c3c,#c0392b);background:-moz-linear-gradient(45deg,#e74c3c,#c0392b);background:-o-linear-gradient(45deg,#e74c3c,#c0392b);background:linear-gradient(45deg,#e74c3c,#c0392b);border:none}.income-gradient.jsx-d7cd3141d15271d8{background:-webkit-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-moz-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:-o-linear-gradient(315deg,#1a5f7a 0%,#2c3e50 100%);background:linear-gradient(135deg,#1a5f7a 0%,#2c3e50 100%)}.table.jsx-d7cd3141d15271d8 thead.jsx-d7cd3141d15271d8 th.jsx-d7cd3141d15271d8{background:-webkit-linear-gradient(45deg,#34495e,#415b76);background:-moz-linear-gradient(45deg,#34495e,#415b76);background:-o-linear-gradient(45deg,#34495e,#415b76);background:linear-gradient(45deg,#34495e,#415b76);color:#fff;font-weight:500;padding:15px;font-size:.95rem;border:none;text-transform:uppercase;letter-spacing:.5px}.table.jsx-d7cd3141d15271d8 tbody.jsx-d7cd3141d15271d8 tr.jsx-d7cd3141d15271d8{-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.table.jsx-d7cd3141d15271d8 tbody.jsx-d7cd3141d15271d8 tr.jsx-d7cd3141d15271d8:hover{background-color:rgba(52,152,219,.05);-webkit-transform:scale(1.005);-moz-transform:scale(1.005);-ms-transform:scale(1.005);-o-transform:scale(1.005);transform:scale(1.005)}.card.jsx-d7cd3141d15271d8{border:none;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-transition:-webkit-transform.2s,box-shadow.2s;-moz-transition:-moz-transform.2s,box-shadow.2s;-o-transition:-o-transform.2s,box-shadow.2s;transition:-webkit-transform.2s,box-shadow.2s;transition:-moz-transform.2s,box-shadow.2s;transition:-o-transform.2s,box-shadow.2s;transition:transform.2s,box-shadow.2s;margin-bottom:25px}.card-header.jsx-d7cd3141d15271d8{border-bottom:2px solid rgba(0,0,0,.1);padding:15px 20px}.badge.jsx-d7cd3141d15271d8{padding:8px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;font-weight:500;background:-webkit-linear-gradient(45deg,#3498db,#2980b9);background:-moz-linear-gradient(45deg,#3498db,#2980b9);background:-o-linear-gradient(45deg,#3498db,#2980b9);background:linear-gradient(45deg,#3498db,#2980b9)}"})]})}}},function(d){d.O(0,[645,2198,2888,9774,179],function(){return d(d.s=5624)}),_N_E=d.O()}]);