(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{7286:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/Login",function(){return s(7806)}])},7806:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),i=s(763),n=s(1365),l=s(7294),r=s(1163),c=s(6455),o=s.n(c),m=s(6245);function d(){let e=(0,r.useRouter)(),[t,s]=(0,l.useState)({email:"",password:""}),[c,d]=(0,l.useState)({}),[h,x]=(0,l.useState)(""),f=e=>{s(t=>({...t,[e.target.name]:e.target.value}))},p=async s=>{let a;s.preventDefault();let i=(a={},""===t.email?a.email="อีเมลไม่ควรที่จะเป็นช่องว่าง":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.email)||(a.email="อีเมลไม่ถูกต้อง"),""===t.password?a.password="รหัสไม่ควรที่จะเป็นช่องว่าง":/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,20}/.test(t.password)||(a.password="รหัสผ่านไม่ถูกต้อง"),a);if(d(i),0===Object.keys(i).length)try{let s=await fetch("https://server.jtppmotor.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error(await s.text());let a=await s.json();localStorage.setItem("token",a.token);let i=(0,m.Z)(a.token);"User"===i.role?e.push("/"):("SuperAdmin"===i.role||"Admin"===i.role)&&e.push("/backend/Main")}catch(e){o().fire({icon:"error",title:"ล็อกอินล้มเหลว",text:"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง"}),console.error("เกิดข้อผิดพลาดในการล็อกอิน: ",e),x(e.message||"มีข้อผิดพลาดในการล็อกอิน")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{}),(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"containerLogin",children:(0,a.jsx)("div",{className:"form-signin",children:(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"เข้าสู่ระบบ"}),(0,a.jsxs)("div",{className:"form-floating",children:[(0,a.jsx)("input",{type:"email",className:"form-control",id:"Email",placeholder:"name@example.com",name:"email",onChange:f}),(0,a.jsx)("label",{htmlFor:"floatingInput",children:"อีเมล"}),c.email&&(0,a.jsxs)("span",{className:"text-danger",children:[" ",c.email]})]}),(0,a.jsxs)("div",{className:"form-floating",children:[(0,a.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",name:"password",onChange:f}),(0,a.jsx)("label",{htmlFor:"floatingPassword",children:"รหัสผ่าน"}),c.password&&(0,a.jsxs)("span",{className:"text-danger",children:[" ",c.password]})]}),(0,a.jsxs)("p",{className:"mt-3",children:["ลืมรหัสผ่าน?"," ",(0,a.jsx)("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{o().fire({title:"รีเซ็ตรหัสผ่าน",input:"email",inputLabel:"กรุณากรอกอีเมลของคุณ",inputPlaceholder:"name@example.com",showCancelButton:!0,confirmButtonText:"ส่งคำขอ",cancelButtonText:"ยกเลิก"}).then(async e=>{if(e.isConfirmed){let t=e.value;if(!t){o().fire({icon:"warning",title:"คำเตือน",text:"กรุณากรอกอีเมลก่อนส่งคำขอ"});return}try{let e=await fetch("https://server.jtppmotor.com/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),s=await e.json();e.ok?o().fire({icon:"success",title:"สำเร็จ",text:"ระบบได้ส่งลิงก์รีเซ็ตรหัสผ่านไปยังอีเมลของคุณแล้ว"}):o().fire({icon:"error",title:"ล้มเหลว",text:s.error||"เกิดข้อผิดพลาดในการส่งอีเมล"})}catch(e){o().fire({icon:"error",title:"ล้มเหลว",text:"ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้"})}}})},children:"รีเซ็ตรหัสผ่าน"})]}),h&&(0,a.jsxs)("span",{className:"text-danger",children:[" ",h]}),(0,a.jsx)("button",{className:"btn btn-primary w-100 py-2",type:"submit",children:"เข้าสู่ระบบ"})]})})})}),(0,a.jsx)(n.default,{})]})}},1365:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(5893);function i(){return(0,a.jsx)("footer",{style:{width:"100%",backgroundColor:"#382424",marginTop:"auto"},children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"py-4 px-4",children:[(0,a.jsxs)("div",{className:"row text-center text-md-start",children:[(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,a.jsx)("h5",{className:"text-white",children:"JTPP MOTOR"}),(0,a.jsx)("p",{className:"text-white",style:{fontSize:"1rem",lineHeight:"1.6"},children:"จำหน่ายอะไหล่มอเตอร์ไซค์คุณภาพดี ราคาเป็นมิตร พร้อมบริการที่ประทับใจ"})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,a.jsx)("h5",{className:"text-white",children:"ติดต่อเรา"}),(0,a.jsxs)("ul",{className:"list-unstyled",children:[(0,a.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,a.jsx)("i",{className:"bi bi-geo-alt me-2"})," 199/2, ตำบลดงเย็น, อำเภอบ้านดุง, อุดรธานี 41190"]}),(0,a.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,a.jsx)("i",{className:"bi bi-telephone me-2"})," 095-606-4364"]})]})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-end",children:[(0,a.jsx)("h5",{className:"text-white",children:"ติดตามเรา"}),(0,a.jsxs)("div",{className:"d-flex gap-3 justify-content-center",children:[(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-facebook"})}),(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-line"})}),(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-instagram"})})]})]})]}),(0,a.jsx)("div",{className:"border-top pt-3 mt-3 text-center",children:(0,a.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem"},children:"\xa9 2023 JTPP MOTOR. All rights reserved."})})]})})})}}},function(e){e.O(0,[1664,763,2888,9774,179],function(){return e(e.s=7286)}),_N_E=e.O()}]);