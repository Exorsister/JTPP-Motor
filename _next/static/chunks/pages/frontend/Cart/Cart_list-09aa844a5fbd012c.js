(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9027],{7429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/frontend/Cart/Cart_list",function(){return r(3813)}])},1365:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var a=r(5893);function s(){return(0,a.jsx)("footer",{style:{width:"100%",backgroundColor:"#382424",marginTop:"auto"},children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"py-4 px-4",children:[(0,a.jsxs)("div",{className:"row text-center text-md-start",children:[(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,a.jsx)("h5",{className:"text-white",children:"JTPP MOTOR"}),(0,a.jsx)("p",{className:"text-white",style:{fontSize:"1rem",lineHeight:"1.6"},children:"จำหน่ายอะไหล่มอเตอร์ไซค์คุณภาพดี ราคาเป็นมิตร พร้อมบริการที่ประทับใจ"})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,a.jsx)("h5",{className:"text-white",children:"ติดต่อเรา"}),(0,a.jsxs)("ul",{className:"list-unstyled",children:[(0,a.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,a.jsx)("i",{className:"bi bi-geo-alt me-2"})," 199/2, ตำบลดงเย็น, อำเภอบ้านดุง, อุดรธานี 41190"]}),(0,a.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,a.jsx)("i",{className:"bi bi-telephone me-2"})," 095-606-4364"]})]})]}),(0,a.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-end",children:[(0,a.jsx)("h5",{className:"text-white",children:"ติดตามเรา"}),(0,a.jsxs)("div",{className:"d-flex gap-3 justify-content-center",children:[(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-facebook"})}),(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-line"})}),(0,a.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,a.jsx)("i",{className:"bi bi-instagram"})})]})]})]}),(0,a.jsx)("div",{className:"border-top pt-3 mt-3 text-center",children:(0,a.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem"},children:"\xa9 2023 JTPP MOTOR. All rights reserved."})})]})})})}},3813:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(5893),s=r(645),n=r.n(s),o=r(7294),i=r(1163),d=r(763),c=r(1365),l=r(6455),b=r.n(l),x=r(6245);let m={pageContainer:{backgroundColor:"#f8f9fa",padding:"2rem 0"},cartContainer:{backgroundColor:"#ffffff",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",padding:"2rem",marginBottom:"2rem"},tableHeader:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},actionButton:{minWidth:"120px",fontWeight:"500"}};function f(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)({}),[l,f]=(0,o.useState)({}),g=(0,i.useRouter)();(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){g.push("/login");return}let r=(0,x.Z)(e),a="cart_".concat(r.User_ID),n=JSON.parse(localStorage.getItem(a)||"[]");console.log("Cart items loaded:",n);let o={};for(let e of n)try{var i;let t=await fetch("https://server.jtppmotor.com/api/product_detail/".concat(e.Product_ID)),r=await t.json(),a=(null===(i=r[0])||void 0===i?void 0:i.Stock_Quantity)||0;o[e.Product_ID]=a}catch(t){console.error("Error checking stock:",t),o[e.Product_ID]=0}f(o),t(n);let d={};n.forEach(e=>{d[e.Product_ID]=!1}),s(d)})()},[]);let u=(r,a)=>{let s=localStorage.getItem("token"),n=(0,x.Z)(s),o="cart_".concat(n.User_ID),i=parseInt(a);if(i>l[r]){b().fire({title:"ไม่สามารถเพิ่มจำนวนได้",text:"มีสินค้าในสต็อกเพียง ".concat(l[r]," ชิ้น"),icon:"warning"});return}let d=e.map(e=>e.Product_ID===r?{...e,quantity:i}:e);t(d),localStorage.setItem(o,JSON.stringify(d))},h=a=>{let n=localStorage.getItem("token"),o=(0,x.Z)(n),i="cart_".concat(o.User_ID),d=e.filter(e=>e.Product_ID!==a);t(d),localStorage.setItem(i,JSON.stringify(d));let c={...r};delete c[a],s(c)},p=e=>{l[e]>0?s(t=>({...t,[e]:!t[e]})):b().fire({title:"ไม่สามารถเลือกสินค้านี้ได้",text:"สินค้าหมดสต็อก",icon:"warning"})},j=async()=>{let a=localStorage.getItem("token");if(!a){await b().fire({title:"กรุณาเข้าสู่ระบบ",text:"ต้องเข้าสู่ระบบก่อนจองสินค้า",icon:"warning",confirmButtonText:"เข้าสู่ระบบ"}),g.push("/login");return}let n=e.filter(e=>r[e.Product_ID]);if(0===n.length){await b().fire({title:"กรุณาเลือกสินค้า",text:"กรุณาเลือกสินค้าที่ต้องการจอง",icon:"warning"});return}for(let e of n)try{var o;let t=await fetch("https://server.jtppmotor.com/api/product_detail/".concat(e.Product_ID)),r=await t.json(),a=(null===(o=r[0])||void 0===o?void 0:o.Stock_Quantity)||0;if(e.quantity>a){await b().fire({title:"ไม่สามารถจองสินค้าได้",text:"สินค้า ".concat(e.Product_Name," มีในสต็อกเพียง ").concat(a," ชิ้น"),icon:"warning"});return}}catch(e){console.error("Error checking stock:",e),await b().fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถตรวจสอบสต็อกสินค้าได้",icon:"error"});return}try{let o=await fetch("https://server.jtppmotor.com/api/authen",{method:"POST",headers:{Authorization:"Bearer ".concat(a)}}),{decoded:i}=await o.json(),d={userId:i.User_ID,userName:"".concat(i.firstName," ").concat(i.lastname),userTel:i.phone,orderTotalPrice:n.reduce((e,t)=>e+t.Price_product*t.quantity,0),orderDetails:n.map(e=>({productId:e.Product_ID,amount:e.quantity,price:e.Price_product,priceAll:e.Price_product*e.quantity}))};if((await fetch("https://server.jtppmotor.com/api/order/addOrderSell",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(d)})).ok){await b().fire({title:"จองสินค้าสำเร็จ",icon:"success"});let a=e.filter(e=>!r[e.Product_ID]);t(a);let n="cart_".concat(i.User_ID);localStorage.setItem(n,JSON.stringify(a));let o={};a.forEach(e=>{o[e.Product_ID]=!1}),s(o)}}catch(e){console.error(e),await b().fire({title:"เกิดข้อผิดพลาด",text:"ไม่สามารถจองสินค้าได้",icon:"error"})}},w=Object.values(r).some(e=>e);return(0,a.jsxs)("div",{className:"app-container",children:[(0,a.jsx)(d.default,{}),(0,a.jsx)("main",{className:"content",children:(0,a.jsxs)("div",{style:m.pageContainer,className:"jsx-15b44880fb751979 container",children:[(0,a.jsx)("h2",{className:"jsx-15b44880fb751979 mb-4 text-center",children:"ตะกร้าสินค้า"}),0===e.length?(0,a.jsxs)("div",{className:"jsx-15b44880fb751979 text-center py-5",children:[(0,a.jsx)("p",{className:"jsx-15b44880fb751979 mb-4",children:"ไม่มีสินค้าในตะกร้า"}),(0,a.jsx)("button",{onClick:()=>g.push("/frontend/Product/Product_list"),className:"jsx-15b44880fb751979 btn btn-primary",children:"เลือกซื้อสินค้า"})]}):(0,a.jsxs)("div",{style:m.cartContainer,className:"jsx-15b44880fb751979",children:[(0,a.jsx)("div",{className:"jsx-15b44880fb751979 table-responsive",children:(0,a.jsxs)("table",{className:"jsx-15b44880fb751979 table",children:[(0,a.jsx)("thead",{style:m.tableHeader,className:"jsx-15b44880fb751979",children:(0,a.jsxs)("tr",{className:"jsx-15b44880fb751979",children:[(0,a.jsx)("th",{style:{width:"5%"},className:"jsx-15b44880fb751979",children:"เลือก"}),(0,a.jsx)("th",{style:{width:"40%"},className:"jsx-15b44880fb751979",children:"สินค้า"}),(0,a.jsx)("th",{style:{width:"15%"},className:"jsx-15b44880fb751979",children:"ราคา"}),(0,a.jsx)("th",{style:{width:"15%"},className:"jsx-15b44880fb751979",children:"จำนวน"}),(0,a.jsx)("th",{style:{width:"15%"},className:"jsx-15b44880fb751979",children:"ราคารวม"}),(0,a.jsx)("th",{style:{width:"10%"},className:"jsx-15b44880fb751979"})]})}),(0,a.jsx)("tbody",{className:"jsx-15b44880fb751979",children:e.map(e=>(0,a.jsxs)("tr",{className:"jsx-15b44880fb751979",children:[(0,a.jsx)("td",{className:"jsx-15b44880fb751979",children:(0,a.jsx)("input",{type:"checkbox",checked:r[e.Product_ID]||!1,onChange:()=>p(e.Product_ID),disabled:0===l[e.Product_ID],className:"jsx-15b44880fb751979 form-check-input"})}),(0,a.jsx)("td",{className:"jsx-15b44880fb751979",children:(0,a.jsxs)("div",{className:"jsx-15b44880fb751979 d-flex align-items-center",children:[(0,a.jsx)("img",{src:"https://server.jtppmotor.com/uploads/".concat(e.Product_pic),alt:e.Product_Name,style:{width:"50px",height:"50px",objectFit:"contain"},className:"jsx-15b44880fb751979 me-2"}),e.Product_Name]})}),(0,a.jsxs)("td",{className:"jsx-15b44880fb751979",children:["฿",e.Price_product.toLocaleString()]}),(0,a.jsxs)("td",{className:"jsx-15b44880fb751979",children:[(0,a.jsx)("input",{type:"number",min:"1",max:l[e.Product_ID],value:e.quantity,onChange:t=>u(e.Product_ID,t.target.value),style:{width:"80px"},disabled:0===l[e.Product_ID],className:"jsx-15b44880fb751979 form-control"}),(0,a.jsx)("small",{className:"jsx-15b44880fb751979 text-muted d-block mt-1",children:0===l[e.Product_ID]?(0,a.jsx)("span",{className:"jsx-15b44880fb751979 text-danger",children:"สินค้าหมด"}):"มีในสต็อก: ".concat(l[e.Product_ID]," ชิ้น")})]}),(0,a.jsxs)("td",{className:"jsx-15b44880fb751979",children:["฿",(e.Price_product*e.quantity).toLocaleString()]}),(0,a.jsx)("td",{className:"jsx-15b44880fb751979",children:(0,a.jsx)("button",{onClick:()=>h(e.Product_ID),className:"jsx-15b44880fb751979 btn btn-sm btn-danger",children:"ลบ"})})]},e.Product_ID))})]})}),(0,a.jsxs)("div",{className:"jsx-15b44880fb751979 d-flex justify-content-between align-items-center mt-4",children:[(0,a.jsxs)("div",{className:"jsx-15b44880fb751979",children:[(0,a.jsxs)("h4",{className:"jsx-15b44880fb751979 mb-2",children:["ราคารวมที่เลือก: ฿",e.filter(e=>r[e.Product_ID]).reduce((e,t)=>e+t.Price_product*t.quantity,0).toLocaleString()]}),(0,a.jsx)("p",{className:"jsx-15b44880fb751979 text-muted",children:w?"เลือก ".concat(Object.values(r).filter(e=>e).length," รายการ"):"ยังไม่ได้เลือกสินค้า"})]}),(0,a.jsxs)("div",{className:"jsx-15b44880fb751979",children:[(0,a.jsx)("button",{onClick:j,disabled:!w,style:m.actionButton,className:"jsx-15b44880fb751979 btn btn-primary me-2",children:"จองสินค้า"}),(0,a.jsx)("button",{onClick:()=>g.push("/frontend/Product/Product_list"),style:m.actionButton,className:"jsx-15b44880fb751979 btn btn-outline-primary",children:"เลือกซื้อสินค้าเพิ่ม"})]})]})]}),(0,a.jsx)(n(),{id:"15b44880fb751979",children:".container.jsx-15b44880fb751979{background-color:#f8f9fa;padding:20px;max-width:1400px;margin:0 auto}.header.jsx-15b44880fb751979{background-color:#fff;border-bottom:1px solid#dee2e6;padding:10px 0}.page-title.jsx-15b44880fb751979{margin:0;font-size:1.5rem;font-weight:700;background:-webkit-linear-gradient(45deg,#2c3e50,#3498db);background:-moz-linear-gradient(45deg,#2c3e50,#3498db);background:-o-linear-gradient(45deg,#2c3e50,#3498db);background:linear-gradient(45deg,#2c3e50,#3498db);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.card.jsx-15b44880fb751979{border:none;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;-webkit-transition:-webkit-transform.2s,box-shadow.2s;-moz-transition:-moz-transform.2s,box-shadow.2s;-o-transition:-o-transform.2s,box-shadow.2s;transition:-webkit-transform.2s,box-shadow.2s;transition:-moz-transform.2s,box-shadow.2s;transition:-o-transform.2s,box-shadow.2s;transition:transform.2s,box-shadow.2s;margin-bottom:25px;-webkit-box-shadow:0 0 15px rgba(0,0,0,.08);-moz-box-shadow:0 0 15px rgba(0,0,0,.08);box-shadow:0 0 15px rgba(0,0,0,.08)}.card.jsx-15b44880fb751979:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 .5rem 1rem rgba(0,0,0,.15);-moz-box-shadow:0 .5rem 1rem rgba(0,0,0,.15);box-shadow:0 .5rem 1rem rgba(0,0,0,.15)}.income-gradient.jsx-15b44880fb751979{background:-webkit-linear-gradient(315deg,#2471a3 0%,#2980b9 100%);background:-moz-linear-gradient(315deg,#2471a3 0%,#2980b9 100%);background:-o-linear-gradient(315deg,#2471a3 0%,#2980b9 100%);background:linear-gradient(135deg,#2471a3 0%,#2980b9 100%);padding:1.2rem;border-bottom:3px solid rgba(255,255,255,.1)}.card-header.jsx-15b44880fb751979 .card-title.jsx-15b44880fb751979{color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.2);font-size:1.2rem;margin:0;padding:0;border:none;letter-spacing:.5px}.table.jsx-15b44880fb751979{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden}.table.jsx-15b44880fb751979 thead.jsx-15b44880fb751979 th.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#2980b9,#3498db);background:-moz-linear-gradient(45deg,#2980b9,#3498db);background:-o-linear-gradient(45deg,#2980b9,#3498db);background:linear-gradient(45deg,#2980b9,#3498db);color:#fff;font-weight:500;padding:15px;font-size:.95rem;border:none;text-transform:uppercase;letter-spacing:.5px}.table.jsx-15b44880fb751979 tbody.jsx-15b44880fb751979 tr.jsx-15b44880fb751979{-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.table.jsx-15b44880fb751979 tbody.jsx-15b44880fb751979 tr.jsx-15b44880fb751979:hover{background-color:rgba(52,152,219,.05);-webkit-transform:scale(1.005);-moz-transform:scale(1.005);-ms-transform:scale(1.005);-o-transform:scale(1.005);transform:scale(1.005)}.btn.jsx-15b44880fb751979{-webkit-transition:all.3s;-moz-transition:all.3s;-o-transition:all.3s;transition:all.3s;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;padding:8px 16px}.btn.jsx-15b44880fb751979:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.btn-primary.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#2980b9,#3498db);background:-moz-linear-gradient(45deg,#2980b9,#3498db);background:-o-linear-gradient(45deg,#2980b9,#3498db);background:linear-gradient(45deg,#2980b9,#3498db);border:none}.btn-danger.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#e74c3c,#ef5350);background:-moz-linear-gradient(45deg,#e74c3c,#ef5350);background:-o-linear-gradient(45deg,#e74c3c,#ef5350);background:linear-gradient(45deg,#e74c3c,#ef5350);border:none}.btn-info.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#2980b9,#3498db);background:-moz-linear-gradient(45deg,#2980b9,#3498db);background:-o-linear-gradient(45deg,#2980b9,#3498db);background:linear-gradient(45deg,#2980b9,#3498db);border:none;color:white}.table-responsive.jsx-15b44880fb751979{padding:10px}.card-body.jsx-15b44880fb751979{padding:1.5rem}.form-control.jsx-15b44880fb751979{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#dee2e6}.form-control.jsx-15b44880fb751979:focus{border-color:#2980b9;-webkit-box-shadow:0 0 0 .2rem rgba(41,128,185,.25);-moz-box-shadow:0 0 0 .2rem rgba(41,128,185,.25);box-shadow:0 0 0 .2rem rgba(41,128,185,.25)}.badge.jsx-15b44880fb751979{padding:8px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;font-weight:500}.badge.bg-info.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#2980b9,#3498db)!important;background:-moz-linear-gradient(45deg,#2980b9,#3498db)!important;background:-o-linear-gradient(45deg,#2980b9,#3498db)!important;background:linear-gradient(45deg,#2980b9,#3498db)!important}.badge.bg-secondary.jsx-15b44880fb751979{background:-webkit-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:-moz-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:-o-linear-gradient(45deg,#95a5a6,#7f8c8d)!important;background:linear-gradient(45deg,#95a5a6,#7f8c8d)!important}.text-muted.jsx-15b44880fb751979{color:#6c757d!important}.form-check-input.jsx-15b44880fb751979:checked{background-color:#2980b9;border-color:#2980b9}"})]})}),(0,a.jsx)(c.default,{})]})}}},function(e){e.O(0,[645,1664,763,2888,9774,179],function(){return e(e.s=7429)}),_N_E=e.O()}]);