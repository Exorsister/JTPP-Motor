(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6437],{3187:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/frontend/Profile/EditProfile",function(){return a(8032)}])},1365:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var i=a(5893);function n(){return(0,i.jsx)("footer",{style:{width:"100%",backgroundColor:"#382424",marginTop:"auto"},children:(0,i.jsx)("div",{className:"container",children:(0,i.jsxs)("div",{className:"py-4 px-4",children:[(0,i.jsxs)("div",{className:"row text-center text-md-start",children:[(0,i.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,i.jsx)("h5",{className:"text-white",children:"JTPP MOTOR"}),(0,i.jsx)("p",{className:"text-white",style:{fontSize:"1rem",lineHeight:"1.6"},children:"จำหน่ายอะไหล่มอเตอร์ไซค์คุณภาพดี ราคาเป็นมิตร พร้อมบริการที่ประทับใจ"})]}),(0,i.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,i.jsx)("h5",{className:"text-white",children:"ติดต่อเรา"}),(0,i.jsxs)("ul",{className:"list-unstyled",children:[(0,i.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,i.jsx)("i",{className:"bi bi-geo-alt me-2"})," 199/2, ตำบลดงเย็น, อำเภอบ้านดุง, อุดรธานี 41190"]}),(0,i.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,i.jsx)("i",{className:"bi bi-telephone me-2"})," 095-606-4364"]})]})]}),(0,i.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-end",children:[(0,i.jsx)("h5",{className:"text-white",children:"ติดตามเรา"}),(0,i.jsxs)("div",{className:"d-flex gap-3 justify-content-center",children:[(0,i.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,i.jsx)("i",{className:"bi bi-facebook"})}),(0,i.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,i.jsx)("i",{className:"bi bi-line"})}),(0,i.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,i.jsx)("i",{className:"bi bi-instagram"})})]})]})]}),(0,i.jsx)("div",{className:"border-top pt-3 mt-3 text-center",children:(0,i.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem"},children:"\xa9 2023 JTPP MOTOR. All rights reserved."})})]})})})}},8032:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var i=a(5893),n=a(7294),s=a(1163),r=a(763),l=a(1365),o=a(6455),c=a.n(o),d=a(6245);let m={pageContainer:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",minHeight:"100vh",padding:"40px 0"},card:{borderRadius:"12px",border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",background:"#ffffff"},cardHeader:{background:"#1e3a8a",color:"white",padding:"25px 30px",borderRadius:"12px 12px 0 0",borderBottom:"2px solid #1e3a8a"},cardTitle:{fontSize:"24px",fontWeight:"600",letterSpacing:"0.5px",margin:0},formLabel:{color:"#1e3a8a",fontWeight:"600",fontSize:"14px",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},input:{height:"45px",borderRadius:"6px",border:"1px solid #cbd5e1",padding:"8px 16px",fontSize:"15px",transition:"all 0.2s",backgroundColor:"#ffffff","&:focus":{borderColor:"#1e3a8a",boxShadow:"0 0 0 3px rgba(30,58,138,0.1)"}},submitButton:{backgroundColor:"#1e3a8a",color:"#ffffff",height:"48px",fontSize:"16px",fontWeight:"600",letterSpacing:"0.5px",borderRadius:"6px",transition:"all 0.3s","&:hover":{backgroundColor:"#1e40af",transform:"translateY(-1px)"}},profileImageContainer:{width:"150px",height:"150px",margin:"0 auto 20px",border:"3px solid #1e3a8a",borderRadius:"50%",overflow:"hidden",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},imageUploadButton:{padding:"8px 20px",color:"#1e3a8a",backgroundColor:"#ffffff",border:"2px solid #1e3a8a",borderRadius:"6px",fontWeight:"600",fontSize:"14px",letterSpacing:"0.5px",transition:"all 0.2s","&:hover":{backgroundColor:"#1e3a8a",color:"#ffffff"}},formSection:{padding:"30px"}};function p(){let e=(0,s.useRouter)(),[t,a]=(0,n.useState)(!1),[o,p]=(0,n.useState)({firstName:"",lastname:"",email:"",phone:"",profile_img:null}),[f,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{a(!0);let t=localStorage.getItem("token");if(!t){e.push("/login");return}(async e=>{try{let t=await fetch("https://server.jtppmotor.com/api/get_customers/".concat(e)),a=await t.json();p({firstName:a.User_firstName||"",lastname:a.User_lastName||"",email:a.User_Email||"",phone:a.User_Tel||"",profile_img:a.profile_img||null})}catch(e){console.error("Error fetching user data:",e)}})((0,d.Z)(t).User_ID)},[e]);let h=async t=>{t.preventDefault();let a=localStorage.getItem("token"),i=(0,d.Z)(a);try{let t=new FormData;t.append("firstName",o.firstName),t.append("lastname",o.lastname),t.append("email",o.email),t.append("phone",o.phone),o.profile_img instanceof File&&t.append("profile_img",o.profile_img);let n=await fetch("https://server.jtppmotor.com/api/users/update/".concat(i.User_ID),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:t}),s=await n.json();if(!n.ok)throw Error(s.error||"ไม่สามารถอัปเดตข้อมูลได้");s.token&&localStorage.setItem("token",s.token),await c().fire({title:"สำเร็จ",text:"อัปเดตข้อมูลเรียบร้อยแล้ว",icon:"success",confirmButtonColor:"#004d99"}),window.dispatchEvent(new Event("userUpdated")),e.push("/")}catch(e){console.error("Error:",e),await c().fire({title:"เกิดข้อผิดพลาด",text:e.message,icon:"error",confirmButtonColor:"#dc3545"})}},u=e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))};return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n\n  .form-group {\n    animation: fadeIn 0.5s ease-out forwards;\n  }\n\n  .form-control:focus {\n    transform: scale(1.02);\n  }\n\n  .input-group {\n    margin-bottom: 20px;\n    opacity: 0;\n    animation: fadeIn 0.5s ease-out forwards;\n  }\n   .form-control {\n     font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  }\n\n  .form-label {\n     margin-bottom: 0.5rem;\n  }\n\n  .btn {\n    text-transform: uppercase;\n  }\n\n  .input-group:nth-child(1) { animation-delay: 0.1s; }\n  .input-group:nth-child(2) { animation-delay: 0.2s; }\n  .input-group:nth-child(3) { animation-delay: 0.3s; }\n  .input-group:nth-child(4) { animation-delay: 0.4s; }\n"}),(0,i.jsx)(r.default,{}),(0,i.jsx)("div",{style:m.pageContainer,children:(0,i.jsx)("div",{className:"container",children:(0,i.jsx)("div",{className:"row justify-content-center",children:(0,i.jsx)("div",{className:"col-lg-8 col-md-10",children:(0,i.jsxs)("div",{className:"card",style:m.card,children:[(0,i.jsx)("div",{style:m.cardHeader,children:(0,i.jsx)("h2",{style:m.cardTitle,children:"แก้ไขข้อมูลส่วนตัว"})}),(0,i.jsx)("div",{style:m.formSection,children:(0,i.jsxs)("form",{onSubmit:h,children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{style:m.profileImageContainer,children:f||o.profile_img?(0,i.jsx)("img",{src:f||"https://server.jtppmotor.com/uploads/".concat(o.profile_img),alt:"Profile",style:{width:"100%",height:"100%",objectFit:"cover"}},f||o.profile_img):(0,i.jsx)("i",{className:"bi bi-person-fill",style:{width:"100%",height:"100%",fontSize:"80px",display:"flex",alignItems:"center",justifyContent:"center",color:"#1a73e8"}})}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("label",{htmlFor:"profile_img",style:m.imageUploadButton,children:[(0,i.jsx)("i",{className:"bi bi-camera me-2"}),"อัพโหลดรูปภาพ"]}),(0,i.jsx)("input",{type:"file",id:"profile_img",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(p(e=>({...e,profile_img:t})),x(URL.createObjectURL(t)))},className:"d-none"})]})]}),(0,i.jsx)("div",{className:"input-group",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{style:m.formLabel,children:"ชื่อ"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"firstName",value:o.firstName,onChange:u,required:!0,style:m.input})]}),(0,i.jsxs)("div",{className:"col-md-6",children:[(0,i.jsx)("label",{style:m.formLabel,children:"นามสกุล"}),(0,i.jsx)("input",{type:"text",className:"form-control",name:"lastname",value:o.lastname,onChange:u,required:!0,style:m.input})]})]})}),(0,i.jsx)("div",{className:"input-group",children:(0,i.jsxs)("div",{className:"row align-items-center",children:[(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsx)("label",{style:m.formLabel,children:"อีเมล"})}),(0,i.jsx)("div",{className:"col-md-9",children:(0,i.jsx)("input",{type:"email",className:"form-control",name:"email",value:o.email,onChange:u,required:!0,style:m.input})})]})}),(0,i.jsx)("div",{className:"input-group",children:(0,i.jsxs)("div",{className:"row align-items-center",children:[(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsx)("label",{style:m.formLabel,children:"โทรศัพท์"})}),(0,i.jsx)("div",{className:"col-md-9",children:(0,i.jsx)("input",{type:"tel",className:"form-control",name:"phone",value:o.phone,onChange:u,required:!0,style:m.input})})]})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("button",{type:"submit",className:"btn w-100",style:m.submitButton,children:"บันทึกการเปลี่ยนแปลง"})})]})})]})})})})}),(0,i.jsx)(l.default,{})]}):null}}},function(e){e.O(0,[1664,763,2888,9774,179],function(){return e(e.s=3187)}),_N_E=e.O()}]);