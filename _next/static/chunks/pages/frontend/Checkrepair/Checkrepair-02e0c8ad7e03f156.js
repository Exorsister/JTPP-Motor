(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{350:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/frontend/Checkrepair/Checkrepair",function(){return r(6709)}])},1365:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return l}});var t=r(5893);function l(){return(0,t.jsx)("footer",{style:{width:"100%",backgroundColor:"#382424",marginTop:"auto"},children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"py-4 px-4",children:[(0,t.jsxs)("div",{className:"row text-center text-md-start",children:[(0,t.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,t.jsx)("h5",{className:"text-white",children:"JTPP MOTOR"}),(0,t.jsx)("p",{className:"text-white",style:{fontSize:"1rem",lineHeight:"1.6"},children:"จำหน่ายอะไหล่มอเตอร์ไซค์คุณภาพดี ราคาเป็นมิตร พร้อมบริการที่ประทับใจ"})]}),(0,t.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-start",children:[(0,t.jsx)("h5",{className:"text-white",children:"ติดต่อเรา"}),(0,t.jsxs)("ul",{className:"list-unstyled",children:[(0,t.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,t.jsx)("i",{className:"bi bi-geo-alt me-2"})," 199/2, ตำบลดงเย็น, อำเภอบ้านดุง, อุดรธานี 41190"]}),(0,t.jsxs)("li",{className:"text-white",style:{fontSize:"1rem"},children:[(0,t.jsx)("i",{className:"bi bi-telephone me-2"})," 095-606-4364"]})]})]}),(0,t.jsxs)("div",{className:"col-12 col-md-4 mb-3 d-flex flex-column align-items-center align-items-md-end",children:[(0,t.jsx)("h5",{className:"text-white",children:"ติดตามเรา"}),(0,t.jsxs)("div",{className:"d-flex gap-3 justify-content-center",children:[(0,t.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,t.jsx)("i",{className:"bi bi-facebook"})}),(0,t.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,t.jsx)("i",{className:"bi bi-line"})}),(0,t.jsx)("a",{href:"#",className:"text-white fs-3",children:(0,t.jsx)("i",{className:"bi bi-instagram"})})]})]})]}),(0,t.jsx)("div",{className:"border-top pt-3 mt-3 text-center",children:(0,t.jsx)("p",{className:"mb-0 text-white",style:{fontSize:"0.9rem"},children:"\xa9 2023 JTPP MOTOR. All rights reserved."})})]})})})}},6709:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(5893),l=r(7294),a=r(1163),i=r(763),c=r(1365),n=r(6455),d=r.n(n),o=r(6245);function m(){let[e,s]=(0,l.useState)(!1),[r,n]=(0,l.useState)(""),[m,h]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1);(0,a.useRouter)(),(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(e)try{let r=(0,o.Z)(e).User_ID;r&&(s(!0),u(r))}catch(e){console.error("Error decoding token:",e),d().fire("ข้อผิดพลาด","ไม่สามารถดึงข้อมูลผู้ใช้ได้","error")}},[]);let N=e=>/^[0-9]{10}$/.test(e),u=async e=>{j(!0);try{let s=await fetch("https://server.jtppmotor.com/api/get_orderRepairByUser/".concat(e));if(s.ok){let e=await s.json();h(e)}else d().fire("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลออเดอร์ได้","error")}catch(e){console.error("Error:",e),d().fire("ข้อผิดพลาด","เกิดข้อผิดพลาดในการเชื่อมต่อกับเซิร์ฟเวอร์","error")}finally{j(!1)}},b=async()=>{if(!r||!N(r)){d().fire("ข้อผิดพลาด","กรุณากรอกเบอร์โทรที่ถูกต้อง (10 หลัก)","error");return}j(!0);try{let e=await fetch("https://server.jtppmotor.com/api/get_orderRepairByPhone/".concat(r));if(e.ok){let s=await e.json();0===s.length&&d().fire("ไม่พบข้อมูล","ไม่มีออเดอร์ที่เกี่ยวข้อง","info"),h(s)}else d().fire("เกิดข้อผิดพลาด","ไม่สามารถดึงข้อมูลออเดอร์ได้","error")}catch(e){d().fire("ข้อผิดพลาด","เกิดข้อผิดพลาดในการเชื่อมต่อกับเซิร์ฟเวอร์","error")}finally{j(!1)}},f=()=>0===m.length?(0,t.jsx)("p",{children:"ไม่พบข้อมูลออเดอร์"}):m.map((e,s)=>{var r,l;return(0,t.jsxs)("div",{className:"card shadow-lg mb-4 border-0",children:[(0,t.jsx)("div",{className:"card-header bg-primary text-white py-3",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("h5",{className:"mb-0",children:[(0,t.jsx)("i",{className:"bi bi-tools me-2"}),"ออเดอร์ #",e.Order_ID]}),(0,t.jsx)("span",{className:"badge bg-light text-primary",children:e.Order_Status})]})}),(0,t.jsxs)("div",{className:"card-body p-4",children:[(0,t.jsx)("div",{className:"row mb-4",children:(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,t.jsx)("i",{className:"bi bi-person-circle fs-4 me-2"}),(0,t.jsx)("h6",{className:"mb-0",children:"ข้อมูลลูกค้า"})]}),(0,t.jsxs)("div",{className:"ps-4",children:[(0,t.jsxs)("p",{className:"mb-1",children:[(0,t.jsx)("strong",{children:"ชื่อ:"})," ",e.User_Name]}),(0,t.jsxs)("p",{className:"mb-1",children:[(0,t.jsx)("strong",{children:"เบอร์โทร:"})," ",e.User_Tel]}),(0,t.jsxs)("p",{className:"mb-0",children:[(0,t.jsx)("strong",{children:"หมายเหตุ:"})," ",e.Order_Note||"-"]})]})]})}),(0,t.jsx)("div",{className:"card bg-light mb-4",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,t.jsx)("i",{className:"bi bi-motorcycle fs-4 me-2"}),(0,t.jsx)("h6",{className:"mb-0",children:"ข้อมูลรถและการซ่อม"})]}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-borderless",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:"40%"},children:"ชื่อสินค้า/บริการ"}),(0,t.jsx)("th",{style:{width:"20%"},className:"text-center",children:"จำนวน"}),(0,t.jsx)("th",{style:{width:"20%"},className:"text-end",children:"ราคาต่อชิ้น"}),(0,t.jsx)("th",{style:{width:"20%"},className:"text-end",children:"ราคารวม"})]})}),(0,t.jsxs)("tbody",{children:[e.Repair_Details.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.Product_Info.Product_Name}),(0,t.jsx)("td",{className:"text-center",children:e.Product_Info.Product_Amount}),(0,t.jsxs)("td",{className:"text-end",children:[Number(e.Product_Info.Product_Price).toLocaleString()," บาท"]}),(0,t.jsxs)("td",{className:"text-end",children:[(Number(e.Product_Info.Product_Price)*e.Product_Info.Product_Amount).toLocaleString()," บาท"]})]},s)),(0,t.jsxs)("tr",{className:"table-light",children:[(0,t.jsx)("td",{colSpan:"3",className:"text-end",children:(0,t.jsx)("strong",{children:"ค่าแรงช่าง"})}),(0,t.jsx)("td",{className:"text-end",children:(0,t.jsxs)("strong",{children:[Number((null===(r=e.Repair_Details[0])||void 0===r?void 0:r.Repair_Costwork)||0).toLocaleString()," บาท"]})})]}),(0,t.jsxs)("tr",{className:"table-light",children:[(0,t.jsx)("td",{colSpan:"3",className:"text-end",children:(0,t.jsx)("strong",{children:"ราคารวมทั้งหมด"})}),(0,t.jsx)("td",{className:"text-end",children:(0,t.jsxs)("strong",{children:[(e.Repair_Details.reduce((e,s)=>e+Number(s.Product_Info.Product_Price)*s.Product_Info.Product_Amount,0)+Number((null===(l=e.Repair_Details[0])||void 0===l?void 0:l.Repair_Costwork)||0)).toLocaleString()," บาท"]})})]})]})]})})]})})]})]},s)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{}),(0,t.jsx)("div",{className:"container my-5",children:(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsxs)("div",{className:"col-lg-8",children:[(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("h1",{className:"display-4 fw-bold text-primary",children:"ตรวจสอบสถานะซ่อม"}),(0,t.jsx)("div",{className:"border-bottom border-primary border-2 w-25 mx-auto my-4"})]}),e?(0,t.jsx)("div",{className:"card shadow-sm",children:(0,t.jsxs)("div",{className:"card-body p-4",children:[(0,t.jsxs)("h3",{className:"card-title mb-4",children:[(0,t.jsx)("i",{className:"bi bi-person-circle me-2"}),"ออเดอร์ของคุณ"]}),x?(0,t.jsx)("div",{className:"text-center p-5",children:(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"กำลังโหลด..."})})}):f()]})}):(0,t.jsx)("div",{className:"card shadow-sm",children:(0,t.jsxs)("div",{className:"card-body p-4",children:[(0,t.jsxs)("h3",{className:"card-title mb-4",children:[(0,t.jsx)("i",{className:"bi bi-search me-2"}),"ตรวจสถานะผ่านเบอร์โทร"]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"กรอกเบอร์โทร 10 หลัก",value:r,onChange:e=>n(e.target.value)}),(0,t.jsxs)("button",{className:"btn btn-primary btn-lg px-4",onClick:b,children:[(0,t.jsx)("i",{className:"bi bi-search me-2"}),"ค้นหา"]})]})}),x&&(0,t.jsx)("div",{className:"text-center p-5",children:(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"กำลังโหลด..."})})}),!x&&m.length>0&&f()]})})]})})}),(0,t.jsx)(c.default,{})]})}}},function(e){e.O(0,[1664,763,2888,9774,179],function(){return e(e.s=350)}),_N_E=e.O()}]);